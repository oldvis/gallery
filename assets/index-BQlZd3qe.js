import{c as us,g as ls,d as ds,a as Mr,s as Vr,o as Qe,b as bt,e as pe,u as Ne,f as ua,_ as fs,i as hs,Q as ps,n as qn,w as ms,v as ys,h as vs,j as $s,k as wr}from"./index-Dw_5oJ9V.js";var Or={exports:{}},la={},Ce={},St={},Wt={},H={},Bt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((T,A)=>`${T}${A}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((T,A)=>(A instanceof r&&(T[A.str]=(T[A.str]||0)+1),T),{})}}e._Code=n,e.nil=new n("");function a(h,...b){const T=[h[0]];let A=0;for(;A<b.length;)f(T,b[A]),T.push(h[++A]);return new n(T)}e._=a;const o=new n("+");function c(h,...b){const T=[O(h[0])];let A=0;for(;A<b.length;)T.push(o),f(T,b[A]),T.push(o,O(h[++A]));return y(T),new n(T)}e.str=c;function f(h,b){b instanceof n?h.push(...b._items):b instanceof r?h.push(b):h.push($(b))}e.addCodeArg=f;function y(h){let b=1;for(;b<h.length-1;){if(h[b]===o){const T=p(h[b-1],h[b+1]);if(T!==void 0){h.splice(b-1,3,T);continue}h[b++]="+"}b++}}function p(h,b){if(b==='""')return h;if(h==='""')return b;if(typeof h=="string")return b instanceof r||h[h.length-1]!=='"'?void 0:typeof b!="string"?`${h.slice(0,-1)}${b}"`:b[0]==='"'?h.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(h instanceof r))return`"${h}${b.slice(1)}`}function m(h,b){return b.emptyStr()?h:h.emptyStr()?b:c`${h}${b}`}e.strConcat=m;function $(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:O(Array.isArray(h)?h.join(","):h)}function R(h){return new n(O(h))}e.stringify=R;function O(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=O;function S(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new n(`.${h}`):a`[${h}]`}e.getProperty=S;function P(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new n(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=P;function _(h){return new n(h.toString())}e.regexpCode=_})(Bt);var Cr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Bt;class r extends Error{constructor(p){super(`CodeGen: "code" for ${p} not defined`),this.value=p.value}}var n;(function(y){y[y.Started=0]="Started",y[y.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:p,parent:m}={}){this._names={},this._prefixes=p,this._parent=m}toName(p){return p instanceof t.Name?p:this.name(p)}name(p){return new t.Name(this._newName(p))}_newName(p){const m=this._names[p]||this._nameGroup(p);return`${p}${m.index++}`}_nameGroup(p){var m,$;if(!(($=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||$===void 0)&&$.has(p)||this._prefixes&&!this._prefixes.has(p))throw new Error(`CodeGen: prefix "${p}" is not allowed in this scope`);return this._names[p]={prefix:p,index:0}}}e.Scope=a;class o extends t.Name{constructor(p,m){super(m),this.prefix=p}setValue(p,{property:m,itemIndex:$}){this.value=p,this.scopePath=(0,t._)`.${new t.Name(m)}[${$}]`}}e.ValueScopeName=o;const c=(0,t._)`\n`;class f extends a{constructor(p){super(p),this._values={},this._scope=p.scope,this.opts={...p,_n:p.lines?c:t.nil}}get(){return this._scope}name(p){return new o(p,this._newName(p))}value(p,m){var $;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const R=this.toName(p),{prefix:O}=R,S=($=m.key)!==null&&$!==void 0?$:m.ref;let P=this._values[O];if(P){const b=P.get(S);if(b)return b}else P=this._values[O]=new Map;P.set(S,R);const _=this._scope[O]||(this._scope[O]=[]),h=_.length;return _[h]=m.ref,R.setValue(m,{property:O,itemIndex:h}),R}getValue(p,m){const $=this._values[p];if($)return $.get(m)}scopeRefs(p,m=this._values){return this._reduceValues(m,$=>{if($.scopePath===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return(0,t._)`${p}${$.scopePath}`})}scopeCode(p=this._values,m,$){return this._reduceValues(p,R=>{if(R.value===void 0)throw new Error(`CodeGen: name "${R}" has no value`);return R.value.code},m,$)}_reduceValues(p,m,$={},R){let O=t.nil;for(const S in p){const P=p[S];if(!P)continue;const _=$[S]=$[S]||new Map;P.forEach(h=>{if(_.has(h))return;_.set(h,n.Started);let b=m(h);if(b){const T=this.opts.es5?e.varKinds.var:e.varKinds.const;O=(0,t._)`${O}${T} ${h} = ${b};${this.opts._n}`}else if(b=R==null?void 0:R(h))O=(0,t._)`${O}${b}${this.opts._n}`;else throw new r(h);_.set(h,n.Completed)})}return O}}e.ValueScope=f})(Cr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Bt,r=Cr;var n=Bt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var a=Cr;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(s,l){return this}}class c extends o{constructor(s,l,N){super(),this.varKind=s,this.name=l,this.rhs=N}render({es5:s,_n:l}){const N=s?r.varKinds.var:this.varKind,I=this.rhs===void 0?"":` = ${this.rhs}`;return`${N} ${this.name}${I};`+l}optimizeNames(s,l){if(s[this.name.str])return this.rhs&&(this.rhs=fe(this.rhs,s,l)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class f extends o{constructor(s,l,N){super(),this.lhs=s,this.rhs=l,this.sideEffects=N}render({_n:s}){return`${this.lhs} = ${this.rhs};`+s}optimizeNames(s,l){if(!(this.lhs instanceof t.Name&&!s[this.lhs.str]&&!this.sideEffects))return this.rhs=fe(this.rhs,s,l),this}get names(){const s=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Te(s,this.rhs)}}class y extends f{constructor(s,l,N,I){super(s,N,I),this.op=l}render({_n:s}){return`${this.lhs} ${this.op}= ${this.rhs};`+s}}class p extends o{constructor(s){super(),this.label=s,this.names={}}render({_n:s}){return`${this.label}:`+s}}class m extends o{constructor(s){super(),this.label=s,this.names={}}render({_n:s}){return`break${this.label?` ${this.label}`:""};`+s}}class $ extends o{constructor(s){super(),this.error=s}render({_n:s}){return`throw ${this.error};`+s}get names(){return this.error.names}}class R extends o{constructor(s){super(),this.code=s}render({_n:s}){return`${this.code};`+s}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(s,l){return this.code=fe(this.code,s,l),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class O extends o{constructor(s=[]){super(),this.nodes=s}render(s){return this.nodes.reduce((l,N)=>l+N.render(s),"")}optimizeNodes(){const{nodes:s}=this;let l=s.length;for(;l--;){const N=s[l].optimizeNodes();Array.isArray(N)?s.splice(l,1,...N):N?s[l]=N:s.splice(l,1)}return s.length>0?this:void 0}optimizeNames(s,l){const{nodes:N}=this;let I=N.length;for(;I--;){const D=N[I];D.optimizeNames(s,l)||(Ye(s,D.names),N.splice(I,1))}return N.length>0?this:void 0}get names(){return this.nodes.reduce((s,l)=>ie(s,l.names),{})}}class S extends O{render(s){return"{"+s._n+super.render(s)+"}"+s._n}}class P extends O{}class _ extends S{}_.kind="else";class h extends S{constructor(s,l){super(l),this.condition=s}render(s){let l=`if(${this.condition})`+super.render(s);return this.else&&(l+="else "+this.else.render(s)),l}optimizeNodes(){super.optimizeNodes();const s=this.condition;if(s===!0)return this.nodes;let l=this.else;if(l){const N=l.optimizeNodes();l=this.else=Array.isArray(N)?new _(N):N}if(l)return s===!1?l instanceof h?l:l.nodes:this.nodes.length?this:new h(Ze(s),l instanceof h?[l]:l.nodes);if(!(s===!1||!this.nodes.length))return this}optimizeNames(s,l){var N;if(this.else=(N=this.else)===null||N===void 0?void 0:N.optimizeNames(s,l),!!(super.optimizeNames(s,l)||this.else))return this.condition=fe(this.condition,s,l),this}get names(){const s=super.names;return Te(s,this.condition),this.else&&ie(s,this.else.names),s}}h.kind="if";class b extends S{}b.kind="for";class T extends b{constructor(s){super(),this.iteration=s}render(s){return`for(${this.iteration})`+super.render(s)}optimizeNames(s,l){if(super.optimizeNames(s,l))return this.iteration=fe(this.iteration,s,l),this}get names(){return ie(super.names,this.iteration.names)}}class A extends b{constructor(s,l,N,I){super(),this.varKind=s,this.name=l,this.from=N,this.to=I}render(s){const l=s.es5?r.varKinds.var:this.varKind,{name:N,from:I,to:D}=this;return`for(${l} ${N}=${I}; ${N}<${D}; ${N}++)`+super.render(s)}get names(){const s=Te(super.names,this.from);return Te(s,this.to)}}class M extends b{constructor(s,l,N,I){super(),this.loop=s,this.varKind=l,this.name=N,this.iterable=I}render(s){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(s)}optimizeNames(s,l){if(super.optimizeNames(s,l))return this.iterable=fe(this.iterable,s,l),this}get names(){return ie(super.names,this.iterable.names)}}class Q extends S{constructor(s,l,N){super(),this.name=s,this.args=l,this.async=N}render(s){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(s)}}Q.kind="func";class ne extends O{render(s){return"return "+super.render(s)}}ne.kind="return";class be extends S{render(s){let l="try"+super.render(s);return this.catch&&(l+=this.catch.render(s)),this.finally&&(l+=this.finally.render(s)),l}optimizeNodes(){var s,l;return super.optimizeNodes(),(s=this.catch)===null||s===void 0||s.optimizeNodes(),(l=this.finally)===null||l===void 0||l.optimizeNodes(),this}optimizeNames(s,l){var N,I;return super.optimizeNames(s,l),(N=this.catch)===null||N===void 0||N.optimizeNames(s,l),(I=this.finally)===null||I===void 0||I.optimizeNames(s,l),this}get names(){const s=super.names;return this.catch&&ie(s,this.catch.names),this.finally&&ie(s,this.finally.names),s}}class Re extends S{constructor(s){super(),this.error=s}render(s){return`catch(${this.error})`+super.render(s)}}Re.kind="catch";class qe extends S{render(s){return"finally"+super.render(s)}}qe.kind="finally";class ze{constructor(s,l={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...l,_n:l.lines?`
`:""},this._extScope=s,this._scope=new r.Scope({parent:s}),this._nodes=[new P]}toString(){return this._root.render(this.opts)}name(s){return this._scope.name(s)}scopeName(s){return this._extScope.name(s)}scopeValue(s,l){const N=this._extScope.value(s,l);return(this._values[N.prefix]||(this._values[N.prefix]=new Set)).add(N),N}getScopeValue(s,l){return this._extScope.getValue(s,l)}scopeRefs(s){return this._extScope.scopeRefs(s,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(s,l,N,I){const D=this._scope.toName(l);return N!==void 0&&I&&(this._constants[D.str]=N),this._leafNode(new c(s,D,N)),D}const(s,l,N){return this._def(r.varKinds.const,s,l,N)}let(s,l,N){return this._def(r.varKinds.let,s,l,N)}var(s,l,N){return this._def(r.varKinds.var,s,l,N)}assign(s,l,N){return this._leafNode(new f(s,l,N))}add(s,l){return this._leafNode(new y(s,e.operators.ADD,l))}code(s){return typeof s=="function"?s():s!==t.nil&&this._leafNode(new R(s)),this}object(...s){const l=["{"];for(const[N,I]of s)l.length>1&&l.push(","),l.push(N),(N!==I||this.opts.es5)&&(l.push(":"),(0,t.addCodeArg)(l,I));return l.push("}"),new t._Code(l)}if(s,l,N){if(this._blockNode(new h(s)),l&&N)this.code(l).else().code(N).endIf();else if(l)this.code(l).endIf();else if(N)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(s){return this._elseNode(new h(s))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(h,_)}_for(s,l){return this._blockNode(s),l&&this.code(l).endFor(),this}for(s,l){return this._for(new T(s),l)}forRange(s,l,N,I,D=this.opts.es5?r.varKinds.var:r.varKinds.let){const G=this._scope.toName(s);return this._for(new A(D,G,l,N),()=>I(G))}forOf(s,l,N,I=r.varKinds.const){const D=this._scope.toName(s);if(this.opts.es5){const G=l instanceof t.Name?l:this.var("_arr",l);return this.forRange("_i",0,(0,t._)`${G}.length`,B=>{this.var(D,(0,t._)`${G}[${B}]`),N(D)})}return this._for(new M("of",I,D,l),()=>N(D))}forIn(s,l,N,I=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(s,(0,t._)`Object.keys(${l})`,N);const D=this._scope.toName(s);return this._for(new M("in",I,D,l),()=>N(D))}endFor(){return this._endBlockNode(b)}label(s){return this._leafNode(new p(s))}break(s){return this._leafNode(new m(s))}return(s){const l=new ne;if(this._blockNode(l),this.code(s),l.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ne)}try(s,l,N){if(!l&&!N)throw new Error('CodeGen: "try" without "catch" and "finally"');const I=new be;if(this._blockNode(I),this.code(s),l){const D=this.name("e");this._currNode=I.catch=new Re(D),l(D)}return N&&(this._currNode=I.finally=new qe,this.code(N)),this._endBlockNode(Re,qe)}throw(s){return this._leafNode(new $(s))}block(s,l){return this._blockStarts.push(this._nodes.length),s&&this.code(s).endBlock(l),this}endBlock(s){const l=this._blockStarts.pop();if(l===void 0)throw new Error("CodeGen: not in self-balancing block");const N=this._nodes.length-l;if(N<0||s!==void 0&&N!==s)throw new Error(`CodeGen: wrong number of nodes: ${N} vs ${s} expected`);return this._nodes.length=l,this}func(s,l=t.nil,N,I){return this._blockNode(new Q(s,l,N)),I&&this.code(I).endFunc(),this}endFunc(){return this._endBlockNode(Q)}optimize(s=1){for(;s-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(s){return this._currNode.nodes.push(s),this}_blockNode(s){this._currNode.nodes.push(s),this._nodes.push(s)}_endBlockNode(s,l){const N=this._currNode;if(N instanceof s||l&&N instanceof l)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${l?`${s.kind}/${l.kind}`:s.kind}"`)}_elseNode(s){const l=this._currNode;if(!(l instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=l.else=s,this}get _root(){return this._nodes[0]}get _currNode(){const s=this._nodes;return s[s.length-1]}set _currNode(s){const l=this._nodes;l[l.length-1]=s}}e.CodeGen=ze;function ie(g,s){for(const l in s)g[l]=(g[l]||0)+(s[l]||0);return g}function Te(g,s){return s instanceof t._CodeOrName?ie(g,s.names):g}function fe(g,s,l){if(g instanceof t.Name)return N(g);if(!I(g))return g;return new t._Code(g._items.reduce((D,G)=>(G instanceof t.Name&&(G=N(G)),G instanceof t._Code?D.push(...G._items):D.push(G),D),[]));function N(D){const G=l[D.str];return G===void 0||s[D.str]!==1?D:(delete s[D.str],G)}function I(D){return D instanceof t._Code&&D._items.some(G=>G instanceof t.Name&&s[G.str]===1&&l[G.str]!==void 0)}}function Ye(g,s){for(const l in s)g[l]=(g[l]||0)-(s[l]||0)}function Ze(g){return typeof g=="boolean"||typeof g=="number"||g===null?!g:(0,t._)`!${C(g)}`}e.not=Ze;const ut=v(e.operators.AND);function Rt(...g){return g.reduce(ut)}e.and=Rt;const lt=v(e.operators.OR);function j(...g){return g.reduce(lt)}e.or=j;function v(g){return(s,l)=>s===t.nil?l:l===t.nil?s:(0,t._)`${C(s)} ${g} ${C(l)}`}function C(g){return g instanceof t.Name?g:(0,t._)`(${g})`}})(H);var k={};Object.defineProperty(k,"__esModule",{value:!0});k.checkStrictMode=k.getErrorPath=k.Type=k.useFunc=k.setEvaluated=k.evaluatedPropsToName=k.mergeEvaluated=k.eachItem=k.unescapeJsonPointer=k.escapeJsonPointer=k.escapeFragment=k.unescapeFragment=k.schemaRefOrVal=k.schemaHasRulesButRef=k.schemaHasRules=k.checkUnknownRules=k.alwaysValidSchema=k.toHash=void 0;const X=H,_s=Bt;function gs(e){const t={};for(const r of e)t[r]=!0;return t}k.toHash=gs;function ws(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(da(e,t),!fa(t,e.self.RULES.all))}k.alwaysValidSchema=ws;function da(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const a=n.RULES.keywords;for(const o in t)a[o]||ma(e,`unknown keyword: "${o}"`)}k.checkUnknownRules=da;function fa(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}k.schemaHasRules=fa;function Es(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}k.schemaHasRulesButRef=Es;function bs({topSchemaRef:e,schemaPath:t},r,n,a){if(!a){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,X._)`${r}`}return(0,X._)`${e}${t}${(0,X.getProperty)(n)}`}k.schemaRefOrVal=bs;function Ss(e){return ha(decodeURIComponent(e))}k.unescapeFragment=Ss;function Ps(e){return encodeURIComponent(Fr(e))}k.escapeFragment=Ps;function Fr(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}k.escapeJsonPointer=Fr;function ha(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}k.unescapeJsonPointer=ha;function Ns(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}k.eachItem=Ns;function zn({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(a,o,c,f)=>{const y=c===void 0?o:c instanceof X.Name?(o instanceof X.Name?e(a,o,c):t(a,o,c),c):o instanceof X.Name?(t(a,c,o),o):r(o,c);return f===X.Name&&!(y instanceof X.Name)?n(a,y):y}}k.mergeEvaluated={props:zn({mergeNames:(e,t,r)=>e.if((0,X._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,X._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,X._)`${r} || {}`).code((0,X._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,X._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,X._)`${r} || {}`),Ur(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:pa}),items:zn({mergeNames:(e,t,r)=>e.if((0,X._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,X._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,X._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,X._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function pa(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,X._)`{}`);return t!==void 0&&Ur(e,r,t),r}k.evaluatedPropsToName=pa;function Ur(e,t,r){Object.keys(r).forEach(n=>e.assign((0,X._)`${t}${(0,X.getProperty)(n)}`,!0))}k.setEvaluated=Ur;const Kn={};function Os(e,t){return e.scopeValue("func",{ref:t,code:Kn[t.code]||(Kn[t.code]=new _s._Code(t.code))})}k.useFunc=Os;var Rr;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Rr||(k.Type=Rr={}));function Cs(e,t,r){if(e instanceof X.Name){const n=t===Rr.Num;return r?n?(0,X._)`"[" + ${e} + "]"`:(0,X._)`"['" + ${e} + "']"`:n?(0,X._)`"/" + ${e}`:(0,X._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,X.getProperty)(e).toString():"/"+Fr(e)}k.getErrorPath=Cs;function ma(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}k.checkStrictMode=ma;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});const he=H,Rs={data:new he.Name("data"),valCxt:new he.Name("valCxt"),instancePath:new he.Name("instancePath"),parentData:new he.Name("parentData"),parentDataProperty:new he.Name("parentDataProperty"),rootData:new he.Name("rootData"),dynamicAnchors:new he.Name("dynamicAnchors"),vErrors:new he.Name("vErrors"),errors:new he.Name("errors"),this:new he.Name("this"),self:new he.Name("self"),scope:new he.Name("scope"),json:new he.Name("json"),jsonPos:new he.Name("jsonPos"),jsonLen:new he.Name("jsonLen"),jsonPart:new he.Name("jsonPart")};Ue.default=Rs;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=H,r=k,n=Ue;e.keywordError={message:({keyword:_})=>(0,t.str)`must pass "${_}" keyword validation`},e.keyword$DataError={message:({keyword:_,schemaType:h})=>h?(0,t.str)`"${_}" keyword must be ${h} ($data)`:(0,t.str)`"${_}" keyword is invalid ($data)`};function a(_,h=e.keywordError,b,T){const{it:A}=_,{gen:M,compositeRule:Q,allErrors:ne}=A,be=$(_,h,b);T??(Q||ne)?y(M,be):p(A,(0,t._)`[${be}]`)}e.reportError=a;function o(_,h=e.keywordError,b){const{it:T}=_,{gen:A,compositeRule:M,allErrors:Q}=T,ne=$(_,h,b);y(A,ne),M||Q||p(T,n.default.vErrors)}e.reportExtraError=o;function c(_,h){_.assign(n.default.errors,h),_.if((0,t._)`${n.default.vErrors} !== null`,()=>_.if(h,()=>_.assign((0,t._)`${n.default.vErrors}.length`,h),()=>_.assign(n.default.vErrors,null)))}e.resetErrorsCount=c;function f({gen:_,keyword:h,schemaValue:b,data:T,errsCount:A,it:M}){if(A===void 0)throw new Error("ajv implementation error");const Q=_.name("err");_.forRange("i",A,n.default.errors,ne=>{_.const(Q,(0,t._)`${n.default.vErrors}[${ne}]`),_.if((0,t._)`${Q}.instancePath === undefined`,()=>_.assign((0,t._)`${Q}.instancePath`,(0,t.strConcat)(n.default.instancePath,M.errorPath))),_.assign((0,t._)`${Q}.schemaPath`,(0,t.str)`${M.errSchemaPath}/${h}`),M.opts.verbose&&(_.assign((0,t._)`${Q}.schema`,b),_.assign((0,t._)`${Q}.data`,T))})}e.extendErrors=f;function y(_,h){const b=_.const("err",h);_.if((0,t._)`${n.default.vErrors} === null`,()=>_.assign(n.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${n.default.vErrors}.push(${b})`),_.code((0,t._)`${n.default.errors}++`)}function p(_,h){const{gen:b,validateName:T,schemaEnv:A}=_;A.$async?b.throw((0,t._)`new ${_.ValidationError}(${h})`):(b.assign((0,t._)`${T}.errors`,h),b.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function $(_,h,b){const{createErrors:T}=_.it;return T===!1?(0,t._)`{}`:R(_,h,b)}function R(_,h,b={}){const{gen:T,it:A}=_,M=[O(A,b),S(_,b)];return P(_,h,M),T.object(...M)}function O({errorPath:_},{instancePath:h}){const b=h?(0,t.str)`${_}${(0,r.getErrorPath)(h,r.Type.Str)}`:_;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,b)]}function S({keyword:_,it:{errSchemaPath:h}},{schemaPath:b,parentSchema:T}){let A=T?h:(0,t.str)`${h}/${_}`;return b&&(A=(0,t.str)`${A}${(0,r.getErrorPath)(b,r.Type.Str)}`),[m.schemaPath,A]}function P(_,{params:h,message:b},T){const{keyword:A,data:M,schemaValue:Q,it:ne}=_,{opts:be,propertyName:Re,topSchemaRef:qe,schemaPath:ze}=ne;T.push([m.keyword,A],[m.params,typeof h=="function"?h(_):h||(0,t._)`{}`]),be.messages&&T.push([m.message,typeof b=="function"?b(_):b]),be.verbose&&T.push([m.schema,Q],[m.parentSchema,(0,t._)`${qe}${ze}`],[n.default.data,M]),Re&&T.push([m.propertyName,Re])}})(Wt);Object.defineProperty(St,"__esModule",{value:!0});St.boolOrEmptySchema=St.topBoolOrEmptySchema=void 0;const Ts=Wt,js=H,Is=Ue,ks={message:"boolean schema is false"};function Ds(e){const{gen:t,schema:r,validateName:n}=e;r===!1?ya(e,!1):typeof r=="object"&&r.$async===!0?t.return(Is.default.data):(t.assign((0,js._)`${n}.errors`,null),t.return(!0))}St.topBoolOrEmptySchema=Ds;function As(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),ya(e)):r.var(t,!0)}St.boolOrEmptySchema=As;function ya(e,t){const{gen:r,data:n}=e,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Ts.reportError)(a,ks,void 0,t)}var ue={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.getRules=it.isJSONType=void 0;const Ms=["string","number","integer","boolean","null","object","array"],Vs=new Set(Ms);function Fs(e){return typeof e=="string"&&Vs.has(e)}it.isJSONType=Fs;function Us(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}it.getRules=Us;var Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.shouldUseRule=Le.shouldUseGroup=Le.schemaHasRulesForType=void 0;function qs({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&va(e,n)}Le.schemaHasRulesForType=qs;function va(e,t){return t.rules.some(r=>$a(e,r))}Le.shouldUseGroup=va;function $a(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Le.shouldUseRule=$a;Object.defineProperty(ue,"__esModule",{value:!0});ue.reportTypeError=ue.checkDataTypes=ue.checkDataType=ue.coerceAndCheckDataType=ue.getJSONTypes=ue.getSchemaTypes=ue.DataType=void 0;const zs=it,Ks=Le,Ls=Wt,K=H,_a=k;var wt;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(wt||(ue.DataType=wt={}));function Hs(e){const t=ga(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ue.getSchemaTypes=Hs;function ga(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(zs.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ue.getJSONTypes=ga;function Gs(e,t){const{gen:r,data:n,opts:a}=e,o=Js(t,a.coerceTypes),c=t.length>0&&!(o.length===0&&t.length===1&&(0,Ks.schemaHasRulesForType)(e,t[0]));if(c){const f=qr(t,n,a.strictNumbers,wt.Wrong);r.if(f,()=>{o.length?Bs(e,t,o):zr(e)})}return c}ue.coerceAndCheckDataType=Gs;const wa=new Set(["string","number","integer","boolean","null"]);function Js(e,t){return t?e.filter(r=>wa.has(r)||t==="array"&&r==="array"):[]}function Bs(e,t,r){const{gen:n,data:a,opts:o}=e,c=n.let("dataType",(0,K._)`typeof ${a}`),f=n.let("coerced",(0,K._)`undefined`);o.coerceTypes==="array"&&n.if((0,K._)`${c} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>n.assign(a,(0,K._)`${a}[0]`).assign(c,(0,K._)`typeof ${a}`).if(qr(t,a,o.strictNumbers),()=>n.assign(f,a))),n.if((0,K._)`${f} !== undefined`);for(const p of r)(wa.has(p)||p==="array"&&o.coerceTypes==="array")&&y(p);n.else(),zr(e),n.endIf(),n.if((0,K._)`${f} !== undefined`,()=>{n.assign(a,f),Ws(e,f)});function y(p){switch(p){case"string":n.elseIf((0,K._)`${c} == "number" || ${c} == "boolean"`).assign(f,(0,K._)`"" + ${a}`).elseIf((0,K._)`${a} === null`).assign(f,(0,K._)`""`);return;case"number":n.elseIf((0,K._)`${c} == "boolean" || ${a} === null
              || (${c} == "string" && ${a} && ${a} == +${a})`).assign(f,(0,K._)`+${a}`);return;case"integer":n.elseIf((0,K._)`${c} === "boolean" || ${a} === null
              || (${c} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(f,(0,K._)`+${a}`);return;case"boolean":n.elseIf((0,K._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(f,!1).elseIf((0,K._)`${a} === "true" || ${a} === 1`).assign(f,!0);return;case"null":n.elseIf((0,K._)`${a} === "" || ${a} === 0 || ${a} === false`),n.assign(f,null);return;case"array":n.elseIf((0,K._)`${c} === "string" || ${c} === "number"
              || ${c} === "boolean" || ${a} === null`).assign(f,(0,K._)`[${a}]`)}}}function Ws({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,K._)`${t} !== undefined`,()=>e.assign((0,K._)`${t}[${r}]`,n))}function Tr(e,t,r,n=wt.Correct){const a=n===wt.Correct?K.operators.EQ:K.operators.NEQ;let o;switch(e){case"null":return(0,K._)`${t} ${a} null`;case"array":o=(0,K._)`Array.isArray(${t})`;break;case"object":o=(0,K._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=c((0,K._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=c();break;default:return(0,K._)`typeof ${t} ${a} ${e}`}return n===wt.Correct?o:(0,K.not)(o);function c(f=K.nil){return(0,K.and)((0,K._)`typeof ${t} == "number"`,f,r?(0,K._)`isFinite(${t})`:K.nil)}}ue.checkDataType=Tr;function qr(e,t,r,n){if(e.length===1)return Tr(e[0],t,r,n);let a;const o=(0,_a.toHash)(e);if(o.array&&o.object){const c=(0,K._)`typeof ${t} != "object"`;a=o.null?c:(0,K._)`!${t} || ${c}`,delete o.null,delete o.array,delete o.object}else a=K.nil;o.number&&delete o.integer;for(const c in o)a=(0,K.and)(a,Tr(c,t,r,n));return a}ue.checkDataTypes=qr;const Qs={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,K._)`{type: ${e}}`:(0,K._)`{type: ${t}}`};function zr(e){const t=Xs(e);(0,Ls.reportError)(t,Qs)}ue.reportTypeError=zr;function Xs(e){const{gen:t,data:r,schema:n}=e,a=(0,_a.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:a,schemaValue:a,parentSchema:n,params:{},it:e}}var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.assignDefaults=void 0;const $t=H,Ys=k;function Zs(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const a in r)Ln(e,a,r[a].default);else t==="array"&&Array.isArray(n)&&n.forEach((a,o)=>Ln(e,o,a.default))}mr.assignDefaults=Zs;function Ln(e,t,r){const{gen:n,compositeRule:a,data:o,opts:c}=e;if(r===void 0)return;const f=(0,$t._)`${o}${(0,$t.getProperty)(t)}`;if(a){(0,Ys.checkStrictMode)(e,`default is ignored for: ${f}`);return}let y=(0,$t._)`${f} === undefined`;c.useDefaults==="empty"&&(y=(0,$t._)`${y} || ${f} === null || ${f} === ""`),n.if(y,(0,$t._)`${f} = ${(0,$t.stringify)(r)}`)}var Fe={},L={};Object.defineProperty(L,"__esModule",{value:!0});L.validateUnion=L.validateArray=L.usePattern=L.callValidateCode=L.schemaProperties=L.allSchemaProperties=L.noPropertyInData=L.propertyInData=L.isOwnProperty=L.hasPropFunc=L.reportMissingProp=L.checkMissingProp=L.checkReportMissingProp=void 0;const x=H,Kr=k,Je=Ue,xs=k;function eo(e,t){const{gen:r,data:n,it:a}=e;r.if(Hr(r,n,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,x._)`${t}`},!0),e.error()})}L.checkReportMissingProp=eo;function to({gen:e,data:t,it:{opts:r}},n,a){return(0,x.or)(...n.map(o=>(0,x.and)(Hr(e,t,o,r.ownProperties),(0,x._)`${a} = ${o}`)))}L.checkMissingProp=to;function ro(e,t){e.setParams({missingProperty:t},!0),e.error()}L.reportMissingProp=ro;function Ea(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,x._)`Object.prototype.hasOwnProperty`})}L.hasPropFunc=Ea;function Lr(e,t,r){return(0,x._)`${Ea(e)}.call(${t}, ${r})`}L.isOwnProperty=Lr;function no(e,t,r,n){const a=(0,x._)`${t}${(0,x.getProperty)(r)} !== undefined`;return n?(0,x._)`${a} && ${Lr(e,t,r)}`:a}L.propertyInData=no;function Hr(e,t,r,n){const a=(0,x._)`${t}${(0,x.getProperty)(r)} === undefined`;return n?(0,x.or)(a,(0,x.not)(Lr(e,t,r))):a}L.noPropertyInData=Hr;function ba(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}L.allSchemaProperties=ba;function ao(e,t){return ba(t).filter(r=>!(0,Kr.alwaysValidSchema)(e,t[r]))}L.schemaProperties=ao;function so({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:o},it:c},f,y,p){const m=p?(0,x._)`${e}, ${t}, ${n}${a}`:t,$=[[Je.default.instancePath,(0,x.strConcat)(Je.default.instancePath,o)],[Je.default.parentData,c.parentData],[Je.default.parentDataProperty,c.parentDataProperty],[Je.default.rootData,Je.default.rootData]];c.opts.dynamicRef&&$.push([Je.default.dynamicAnchors,Je.default.dynamicAnchors]);const R=(0,x._)`${m}, ${r.object(...$)}`;return y!==x.nil?(0,x._)`${f}.call(${y}, ${R})`:(0,x._)`${f}(${R})`}L.callValidateCode=so;const oo=(0,x._)`new RegExp`;function io({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:a}=t.code,o=a(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,x._)`${a.code==="new RegExp"?oo:(0,xs.useFunc)(e,a)}(${r}, ${n})`})}L.usePattern=io;function co(e){const{gen:t,data:r,keyword:n,it:a}=e,o=t.name("valid");if(a.allErrors){const f=t.let("valid",!0);return c(()=>t.assign(f,!1)),f}return t.var(o,!0),c(()=>t.break()),o;function c(f){const y=t.const("len",(0,x._)`${r}.length`);t.forRange("i",0,y,p=>{e.subschema({keyword:n,dataProp:p,dataPropType:Kr.Type.Num},o),t.if((0,x.not)(o),f)})}}L.validateArray=co;function uo(e){const{gen:t,schema:r,keyword:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(y=>(0,Kr.alwaysValidSchema)(a,y))&&!a.opts.unevaluated)return;const c=t.let("valid",!1),f=t.name("_valid");t.block(()=>r.forEach((y,p)=>{const m=e.subschema({keyword:n,schemaProp:p,compositeRule:!0},f);t.assign(c,(0,x._)`${c} || ${f}`),e.mergeValidEvaluated(m,f)||t.if((0,x.not)(c))})),e.result(c,()=>e.reset(),()=>e.error(!0))}L.validateUnion=uo;Object.defineProperty(Fe,"__esModule",{value:!0});Fe.validateKeywordUsage=Fe.validSchemaType=Fe.funcKeywordCode=Fe.macroKeywordCode=void 0;const me=H,at=Ue,lo=L,fo=Wt;function ho(e,t){const{gen:r,keyword:n,schema:a,parentSchema:o,it:c}=e,f=t.macro.call(c.self,a,o,c),y=Sa(r,n,f);c.opts.validateSchema!==!1&&c.self.validateSchema(f,!0);const p=r.name("valid");e.subschema({schema:f,schemaPath:me.nil,errSchemaPath:`${c.errSchemaPath}/${n}`,topSchemaRef:y,compositeRule:!0},p),e.pass(p,()=>e.error(!0))}Fe.macroKeywordCode=ho;function po(e,t){var r;const{gen:n,keyword:a,schema:o,parentSchema:c,$data:f,it:y}=e;yo(y,t);const p=!f&&t.compile?t.compile.call(y.self,o,c,y):t.validate,m=Sa(n,a,p),$=n.let("valid");e.block$data($,R),e.ok((r=t.valid)!==null&&r!==void 0?r:$);function R(){if(t.errors===!1)P(),t.modifying&&Hn(e),_(()=>e.error());else{const h=t.async?O():S();t.modifying&&Hn(e),_(()=>mo(e,h))}}function O(){const h=n.let("ruleErrs",null);return n.try(()=>P((0,me._)`await `),b=>n.assign($,!1).if((0,me._)`${b} instanceof ${y.ValidationError}`,()=>n.assign(h,(0,me._)`${b}.errors`),()=>n.throw(b))),h}function S(){const h=(0,me._)`${m}.errors`;return n.assign(h,null),P(me.nil),h}function P(h=t.async?(0,me._)`await `:me.nil){const b=y.opts.passContext?at.default.this:at.default.self,T=!("compile"in t&&!f||t.schema===!1);n.assign($,(0,me._)`${h}${(0,lo.callValidateCode)(e,m,b,T)}`,t.modifying)}function _(h){var b;n.if((0,me.not)((b=t.valid)!==null&&b!==void 0?b:$),h)}}Fe.funcKeywordCode=po;function Hn(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,me._)`${n.parentData}[${n.parentDataProperty}]`))}function mo(e,t){const{gen:r}=e;r.if((0,me._)`Array.isArray(${t})`,()=>{r.assign(at.default.vErrors,(0,me._)`${at.default.vErrors} === null ? ${t} : ${at.default.vErrors}.concat(${t})`).assign(at.default.errors,(0,me._)`${at.default.vErrors}.length`),(0,fo.extendErrors)(e)},()=>e.error())}function yo({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Sa(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,me.stringify)(r)})}function vo(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Fe.validSchemaType=vo;function $o({schema:e,opts:t,self:r,errSchemaPath:n},a,o){if(Array.isArray(a.keyword)?!a.keyword.includes(o):a.keyword!==o)throw new Error("ajv implementation error");const c=a.dependencies;if(c!=null&&c.some(f=>!Object.prototype.hasOwnProperty.call(e,f)))throw new Error(`parent schema must have dependencies of ${o}: ${c.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[o])){const y=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(y);else throw new Error(y)}}Fe.validateKeywordUsage=$o;var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.extendSubschemaMode=Xe.extendSubschemaData=Xe.getSubschema=void 0;const Ve=H,Pa=k;function _o(e,{keyword:t,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:o,topSchemaRef:c}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const f=e.schema[t];return r===void 0?{schema:f,schemaPath:(0,Ve._)`${e.schemaPath}${(0,Ve.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:f[r],schemaPath:(0,Ve._)`${e.schemaPath}${(0,Ve.getProperty)(t)}${(0,Ve.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Pa.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||o===void 0||c===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:c,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Xe.getSubschema=_o;function go(e,t,{dataProp:r,dataPropType:n,data:a,dataTypes:o,propertyName:c}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=t;if(r!==void 0){const{errorPath:p,dataPathArr:m,opts:$}=t,R=f.let("data",(0,Ve._)`${t.data}${(0,Ve.getProperty)(r)}`,!0);y(R),e.errorPath=(0,Ve.str)`${p}${(0,Pa.getErrorPath)(r,n,$.jsPropertySyntax)}`,e.parentDataProperty=(0,Ve._)`${r}`,e.dataPathArr=[...m,e.parentDataProperty]}if(a!==void 0){const p=a instanceof Ve.Name?a:f.let("data",a,!0);y(p),c!==void 0&&(e.propertyName=c)}o&&(e.dataTypes=o);function y(p){e.data=p,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,p]}}Xe.extendSubschemaData=go;function wo(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:o}){n!==void 0&&(e.compositeRule=n),a!==void 0&&(e.createErrors=a),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Xe.extendSubschemaMode=wo;var de={},Na=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=n;a--!==0;){var c=o[a];if(!e(t[c],r[c]))return!1}return!0}return t!==t&&r!==r},Oa={exports:{}},We=Oa.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};or(t,n,a,e,"",e)};We.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};We.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};We.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};We.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function or(e,t,r,n,a,o,c,f,y,p){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,a,o,c,f,y,p);for(var m in n){var $=n[m];if(Array.isArray($)){if(m in We.arrayKeywords)for(var R=0;R<$.length;R++)or(e,t,r,$[R],a+"/"+m+"/"+R,o,a,m,n,R)}else if(m in We.propsKeywords){if($&&typeof $=="object")for(var O in $)or(e,t,r,$[O],a+"/"+m+"/"+Eo(O),o,a,m,n,O)}else(m in We.keywords||e.allKeys&&!(m in We.skipKeywords))&&or(e,t,r,$,a+"/"+m,o,a,m,n)}r(n,a,o,c,f,y,p)}}function Eo(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var bo=Oa.exports;Object.defineProperty(de,"__esModule",{value:!0});de.getSchemaRefs=de.resolveUrl=de.normalizeId=de._getFullPath=de.getFullPath=de.inlineRef=void 0;const So=k,Po=Na,No=bo,Oo=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Co(e,t=!0){return typeof e=="boolean"?!0:t===!0?!jr(e):t?Ca(e)<=t:!1}de.inlineRef=Co;const Ro=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function jr(e){for(const t in e){if(Ro.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(jr)||typeof r=="object"&&jr(r))return!0}return!1}function Ca(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Oo.has(r)&&(typeof e[r]=="object"&&(0,So.eachItem)(e[r],n=>t+=Ca(n)),t===1/0))return 1/0}return t}function Ra(e,t="",r){r!==!1&&(t=Et(t));const n=e.parse(t);return Ta(e,n)}de.getFullPath=Ra;function Ta(e,t){return e.serialize(t).split("#")[0]+"#"}de._getFullPath=Ta;const To=/#\/?$/;function Et(e){return e?e.replace(To,""):""}de.normalizeId=Et;function jo(e,t,r){return r=Et(r),e.resolve(t,r)}de.resolveUrl=jo;const Io=/^[a-z_][-a-z0-9._]*$/i;function ko(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,a=Et(e[r]||t),o={"":a},c=Ra(n,a,!1),f={},y=new Set;return No(e,{allKeys:!0},($,R,O,S)=>{if(S===void 0)return;const P=c+R;let _=o[S];typeof $[r]=="string"&&(_=h.call(this,$[r])),b.call(this,$.$anchor),b.call(this,$.$dynamicAnchor),o[R]=_;function h(T){const A=this.opts.uriResolver.resolve;if(T=Et(_?A(_,T):T),y.has(T))throw m(T);y.add(T);let M=this.refs[T];return typeof M=="string"&&(M=this.refs[M]),typeof M=="object"?p($,M.schema,T):T!==Et(P)&&(T[0]==="#"?(p($,f[T],T),f[T]=$):this.refs[T]=P),T}function b(T){if(typeof T=="string"){if(!Io.test(T))throw new Error(`invalid anchor "${T}"`);h.call(this,`#${T}`)}}}),f;function p($,R,O){if(R!==void 0&&!Po($,R))throw m(O)}function m($){return new Error(`reference "${$}" resolves to more than one schema`)}}de.getSchemaRefs=ko;Object.defineProperty(Ce,"__esModule",{value:!0});Ce.getData=Ce.KeywordCxt=Ce.validateFunctionCode=void 0;const ja=St,Gn=ue,Gr=Le,lr=ue,Do=mr,Kt=Fe,Er=Xe,V=H,q=Ue,Ao=de,He=k,Ut=Wt;function Mo(e){if(Da(e)&&(Aa(e),ka(e))){Uo(e);return}Ia(e,()=>(0,ja.topBoolOrEmptySchema)(e))}Ce.validateFunctionCode=Mo;function Ia({gen:e,validateName:t,schema:r,schemaEnv:n,opts:a},o){a.code.es5?e.func(t,(0,V._)`${q.default.data}, ${q.default.valCxt}`,n.$async,()=>{e.code((0,V._)`"use strict"; ${Jn(r,a)}`),Fo(e,a),e.code(o)}):e.func(t,(0,V._)`${q.default.data}, ${Vo(a)}`,n.$async,()=>e.code(Jn(r,a)).code(o))}function Vo(e){return(0,V._)`{${q.default.instancePath}="", ${q.default.parentData}, ${q.default.parentDataProperty}, ${q.default.rootData}=${q.default.data}${e.dynamicRef?(0,V._)`, ${q.default.dynamicAnchors}={}`:V.nil}}={}`}function Fo(e,t){e.if(q.default.valCxt,()=>{e.var(q.default.instancePath,(0,V._)`${q.default.valCxt}.${q.default.instancePath}`),e.var(q.default.parentData,(0,V._)`${q.default.valCxt}.${q.default.parentData}`),e.var(q.default.parentDataProperty,(0,V._)`${q.default.valCxt}.${q.default.parentDataProperty}`),e.var(q.default.rootData,(0,V._)`${q.default.valCxt}.${q.default.rootData}`),t.dynamicRef&&e.var(q.default.dynamicAnchors,(0,V._)`${q.default.valCxt}.${q.default.dynamicAnchors}`)},()=>{e.var(q.default.instancePath,(0,V._)`""`),e.var(q.default.parentData,(0,V._)`undefined`),e.var(q.default.parentDataProperty,(0,V._)`undefined`),e.var(q.default.rootData,q.default.data),t.dynamicRef&&e.var(q.default.dynamicAnchors,(0,V._)`{}`)})}function Uo(e){const{schema:t,opts:r,gen:n}=e;Ia(e,()=>{r.$comment&&t.$comment&&Va(e),Ho(e),n.let(q.default.vErrors,null),n.let(q.default.errors,0),r.unevaluated&&qo(e),Ma(e),Bo(e)})}function qo(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,V._)`${r}.evaluated`),t.if((0,V._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,V._)`${e.evaluated}.props`,(0,V._)`undefined`)),t.if((0,V._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,V._)`${e.evaluated}.items`,(0,V._)`undefined`))}function Jn(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,V._)`/*# sourceURL=${r} */`:V.nil}function zo(e,t){if(Da(e)&&(Aa(e),ka(e))){Ko(e,t);return}(0,ja.boolOrEmptySchema)(e,t)}function ka({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function Da(e){return typeof e.schema!="boolean"}function Ko(e,t){const{schema:r,gen:n,opts:a}=e;a.$comment&&r.$comment&&Va(e),Go(e),Jo(e);const o=n.const("_errs",q.default.errors);Ma(e,o),n.var(t,(0,V._)`${o} === ${q.default.errors}`)}function Aa(e){(0,He.checkUnknownRules)(e),Lo(e)}function Ma(e,t){if(e.opts.jtd)return Bn(e,[],!1,t);const r=(0,Gn.getSchemaTypes)(e.schema),n=(0,Gn.coerceAndCheckDataType)(e,r);Bn(e,r,!n,t)}function Lo(e){const{schema:t,errSchemaPath:r,opts:n,self:a}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,He.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Ho(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,He.checkStrictMode)(e,"default is ignored in the schema root")}function Go(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Ao.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Jo(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Va({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:a}){const o=r.$comment;if(a.$comment===!0)e.code((0,V._)`${q.default.self}.logger.log(${o})`);else if(typeof a.$comment=="function"){const c=(0,V.str)`${n}/$comment`,f=e.scopeValue("root",{ref:t.root});e.code((0,V._)`${q.default.self}.opts.$comment(${o}, ${c}, ${f}.schema)`)}}function Bo(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:a,opts:o}=e;r.$async?t.if((0,V._)`${q.default.errors} === 0`,()=>t.return(q.default.data),()=>t.throw((0,V._)`new ${a}(${q.default.vErrors})`)):(t.assign((0,V._)`${n}.errors`,q.default.vErrors),o.unevaluated&&Wo(e),t.return((0,V._)`${q.default.errors} === 0`))}function Wo({gen:e,evaluated:t,props:r,items:n}){r instanceof V.Name&&e.assign((0,V._)`${t}.props`,r),n instanceof V.Name&&e.assign((0,V._)`${t}.items`,n)}function Bn(e,t,r,n){const{gen:a,schema:o,data:c,allErrors:f,opts:y,self:p}=e,{RULES:m}=p;if(o.$ref&&(y.ignoreKeywordsWithRef||!(0,He.schemaHasRulesButRef)(o,m))){a.block(()=>qa(e,"$ref",m.all.$ref.definition));return}y.jtd||Qo(e,t),a.block(()=>{for(const R of m.rules)$(R);$(m.post)});function $(R){(0,Gr.shouldUseGroup)(o,R)&&(R.type?(a.if((0,lr.checkDataType)(R.type,c,y.strictNumbers)),Wn(e,R),t.length===1&&t[0]===R.type&&r&&(a.else(),(0,lr.reportTypeError)(e)),a.endIf()):Wn(e,R),f||a.if((0,V._)`${q.default.errors} === ${n||0}`))}}function Wn(e,t){const{gen:r,schema:n,opts:{useDefaults:a}}=e;a&&(0,Do.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,Gr.shouldUseRule)(n,o)&&qa(e,o.keyword,o.definition,t.type)})}function Qo(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Xo(e,t),e.opts.allowUnionTypes||Yo(e,t),Zo(e,e.dataTypes))}function Xo(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Fa(e.dataTypes,r)||Jr(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),ei(e,t)}}function Yo(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Jr(e,"use allowUnionTypes to allow union type keyword")}function Zo(e,t){const r=e.self.RULES.all;for(const n in r){const a=r[n];if(typeof a=="object"&&(0,Gr.shouldUseRule)(e.schema,a)){const{type:o}=a.definition;o.length&&!o.some(c=>xo(t,c))&&Jr(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function xo(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Fa(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function ei(e,t){const r=[];for(const n of e.dataTypes)Fa(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function Jr(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,He.checkStrictMode)(e,t,e.opts.strictTypes)}class Ua{constructor(t,r,n){if((0,Kt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,He.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",za(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Kt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",q.default.errors))}result(t,r,n){this.failResult((0,V.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,V.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,V._)`${r} !== undefined && (${(0,V.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Ut.reportExtraError:Ut.reportError)(this,this.def.error,r)}$dataError(){(0,Ut.reportError)(this,this.def.$dataError||Ut.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ut.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=V.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=V.nil,r=V.nil){if(!this.$data)return;const{gen:n,schemaCode:a,schemaType:o,def:c}=this;n.if((0,V.or)((0,V._)`${a} === undefined`,r)),t!==V.nil&&n.assign(t,!0),(o.length||c.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==V.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:a,it:o}=this;return(0,V.or)(c(),f());function c(){if(n.length){if(!(r instanceof V.Name))throw new Error("ajv implementation error");const y=Array.isArray(n)?n:[n];return(0,V._)`${(0,lr.checkDataTypes)(y,r,o.opts.strictNumbers,lr.DataType.Wrong)}`}return V.nil}function f(){if(a.validateSchema){const y=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,V._)`!${y}(${r})`}return V.nil}}subschema(t,r){const n=(0,Er.getSubschema)(this.it,t);(0,Er.extendSubschemaData)(n,this.it,t),(0,Er.extendSubschemaMode)(n,t);const a={...this.it,...n,items:void 0,props:void 0};return zo(a,r),a}mergeEvaluated(t,r){const{it:n,gen:a}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=He.mergeEvaluated.props(a,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=He.mergeEvaluated.items(a,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(t,V.Name)),!0}}Ce.KeywordCxt=Ua;function qa(e,t,r,n){const a=new Ua(e,r,t);"code"in r?r.code(a,n):a.$data&&r.validate?(0,Kt.funcKeywordCode)(a,r):"macro"in r?(0,Kt.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,Kt.funcKeywordCode)(a,r)}const ti=/^\/(?:[^~]|~0|~1)*$/,ri=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function za(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let a,o;if(e==="")return q.default.rootData;if(e[0]==="/"){if(!ti.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,o=q.default.rootData}else{const p=ri.exec(e);if(!p)throw new Error(`Invalid JSON-pointer: ${e}`);const m=+p[1];if(a=p[2],a==="#"){if(m>=t)throw new Error(y("property/index",m));return n[t-m]}if(m>t)throw new Error(y("data",m));if(o=r[t-m],!a)return o}let c=o;const f=a.split("/");for(const p of f)p&&(o=(0,V._)`${o}${(0,V.getProperty)((0,He.unescapeJsonPointer)(p))}`,c=(0,V._)`${c} && ${o}`);return c;function y(p,m){return`Cannot access ${p} ${m} levels up, current level is ${t}`}}Ce.getData=za;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});class ni extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Qt.default=ni;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});const br=de;class ai extends Error{constructor(t,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,br.resolveUrl)(t,r,n),this.missingSchema=(0,br.normalizeId)((0,br.getFullPath)(t,this.missingRef))}}Nt.default=ai;var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.resolveSchema=$e.getCompilingSchema=$e.resolveRef=$e.compileSchema=$e.SchemaEnv=void 0;const Se=H,si=Qt,nt=Ue,Oe=de,Qn=k,oi=Ce;class yr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Oe.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}$e.SchemaEnv=yr;function Br(e){const t=Ka.call(this,e);if(t)return t;const r=(0,Oe.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:o}=this.opts,c=new Se.CodeGen(this.scope,{es5:n,lines:a,ownProperties:o});let f;e.$async&&(f=c.scopeValue("Error",{ref:si.default,code:(0,Se._)`require("ajv/dist/runtime/validation_error").default`}));const y=c.scopeName("validate");e.validateName=y;const p={gen:c,allErrors:this.opts.allErrors,data:nt.default.data,parentData:nt.default.parentData,parentDataProperty:nt.default.parentDataProperty,dataNames:[nt.default.data],dataPathArr:[Se.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:c.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Se.stringify)(e.schema)}:{ref:e.schema}),validateName:y,ValidationError:f,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Se.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Se._)`""`,opts:this.opts,self:this};let m;try{this._compilations.add(e),(0,oi.validateFunctionCode)(p),c.optimize(this.opts.code.optimize);const $=c.toString();m=`${c.scopeRefs(nt.default.scope)}return ${$}`,this.opts.code.process&&(m=this.opts.code.process(m,e));const O=new Function(`${nt.default.self}`,`${nt.default.scope}`,m)(this,this.scope.get());if(this.scope.value(y,{ref:O}),O.errors=null,O.schema=e.schema,O.schemaEnv=e,e.$async&&(O.$async=!0),this.opts.code.source===!0&&(O.source={validateName:y,validateCode:$,scopeValues:c._values}),this.opts.unevaluated){const{props:S,items:P}=p;O.evaluated={props:S instanceof Se.Name?void 0:S,items:P instanceof Se.Name?void 0:P,dynamicProps:S instanceof Se.Name,dynamicItems:P instanceof Se.Name},O.source&&(O.source.evaluated=(0,Se.stringify)(O.evaluated))}return e.validate=O,e}catch($){throw delete e.validate,delete e.validateName,m&&this.logger.error("Error compiling schema, function code:",m),$}finally{this._compilations.delete(e)}}$e.compileSchema=Br;function ii(e,t,r){var n;r=(0,Oe.resolveUrl)(this.opts.uriResolver,t,r);const a=e.refs[r];if(a)return a;let o=li.call(this,e,r);if(o===void 0){const c=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:f}=this.opts;c&&(o=new yr({schema:c,schemaId:f,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=ci.call(this,o)}$e.resolveRef=ii;function ci(e){return(0,Oe.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Br.call(this,e)}function Ka(e){for(const t of this._compilations)if(ui(t,e))return t}$e.getCompilingSchema=Ka;function ui(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function li(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||vr.call(this,e,t)}function vr(e,t){const r=this.opts.uriResolver.parse(t),n=(0,Oe._getFullPath)(this.opts.uriResolver,r);let a=(0,Oe.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===a)return Sr.call(this,r,e);const o=(0,Oe.normalizeId)(n),c=this.refs[o]||this.schemas[o];if(typeof c=="string"){const f=vr.call(this,e,c);return typeof(f==null?void 0:f.schema)!="object"?void 0:Sr.call(this,r,f)}if(typeof(c==null?void 0:c.schema)=="object"){if(c.validate||Br.call(this,c),o===(0,Oe.normalizeId)(t)){const{schema:f}=c,{schemaId:y}=this.opts,p=f[y];return p&&(a=(0,Oe.resolveUrl)(this.opts.uriResolver,a,p)),new yr({schema:f,schemaId:y,root:e,baseId:a})}return Sr.call(this,r,c)}}$e.resolveSchema=vr;const di=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Sr(e,{baseId:t,schema:r,root:n}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const f of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const y=r[(0,Qn.unescapeFragment)(f)];if(y===void 0)return;r=y;const p=typeof r=="object"&&r[this.opts.schemaId];!di.has(f)&&p&&(t=(0,Oe.resolveUrl)(this.opts.uriResolver,t,p))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Qn.schemaHasRulesButRef)(r,this.RULES)){const f=(0,Oe.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=vr.call(this,n,f)}const{schemaId:c}=this.opts;if(o=o||new yr({schema:r,schemaId:c,root:n,baseId:t}),o.schema!==o.root.schema)return o}const fi="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",hi="Meta-schema for $data reference (JSON AnySchema extension proposal)",pi="object",mi=["$data"],yi={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},vi=!1,$i={$id:fi,description:hi,type:pi,required:mi,properties:yi,additionalProperties:vi};var Wr={},Ir={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,n){n(t)})(us,function(r){function n(){for(var u=arguments.length,i=Array(u),d=0;d<u;d++)i[d]=arguments[d];if(i.length>1){i[0]=i[0].slice(0,-1);for(var E=i.length-1,w=1;w<E;++w)i[w]=i[w].slice(1,-1);return i[E]=i[E].slice(1),i.join("")}else return i[0]}function a(u){return"(?:"+u+")"}function o(u){return u===void 0?"undefined":u===null?"null":Object.prototype.toString.call(u).split(" ").pop().split("]").shift().toLowerCase()}function c(u){return u.toUpperCase()}function f(u){return u!=null?u instanceof Array?u:typeof u.length!="number"||u.split||u.setInterval||u.call?[u]:Array.prototype.slice.call(u):[]}function y(u,i){var d=u;if(i)for(var E in i)d[E]=i[E];return d}function p(u){var i="[A-Za-z]",d="[0-9]",E=n(d,"[A-Fa-f]"),w=a(a("%[EFef]"+E+"%"+E+E+"%"+E+E)+"|"+a("%[89A-Fa-f]"+E+"%"+E+E)+"|"+a("%"+E+E)),F="[\\:\\/\\?\\#\\[\\]\\@]",U="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",W=n(F,U),Z=u?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ae=u?"[\\uE000-\\uF8FF]":"[]",J=n(i,d,"[\\-\\.\\_\\~]",Z);a(i+n(i,d,"[\\+\\-\\.]")+"*"),a(a(w+"|"+n(J,U,"[\\:]"))+"*");var Y=a(a("25[0-5]")+"|"+a("2[0-4]"+d)+"|"+a("1"+d+d)+"|"+a("0?[1-9]"+d)+"|0?0?"+d),se=a(Y+"\\."+Y+"\\."+Y+"\\."+Y),z=a(E+"{1,4}"),ee=a(a(z+"\\:"+z)+"|"+se),ce=a(a(z+"\\:")+"{6}"+ee),te=a("\\:\\:"+a(z+"\\:")+"{5}"+ee),Ge=a(a(z)+"?\\:\\:"+a(z+"\\:")+"{4}"+ee),De=a(a(a(z+"\\:")+"{0,1}"+z)+"?\\:\\:"+a(z+"\\:")+"{3}"+ee),Ae=a(a(a(z+"\\:")+"{0,2}"+z)+"?\\:\\:"+a(z+"\\:")+"{2}"+ee),vt=a(a(a(z+"\\:")+"{0,3}"+z)+"?\\:\\:"+z+"\\:"+ee),tt=a(a(a(z+"\\:")+"{0,4}"+z)+"?\\:\\:"+ee),we=a(a(a(z+"\\:")+"{0,5}"+z)+"?\\:\\:"+z),Me=a(a(a(z+"\\:")+"{0,6}"+z)+"?\\:\\:"),rt=a([ce,te,Ge,De,Ae,vt,tt,we,Me].join("|")),Ke=a(a(J+"|"+w)+"+");a("[vV]"+E+"+\\."+n(J,U,"[\\:]")+"+"),a(a(w+"|"+n(J,U))+"*");var Vt=a(w+"|"+n(J,U,"[\\:\\@]"));return a(a(w+"|"+n(J,U,"[\\@]"))+"+"),a(a(Vt+"|"+n("[\\/\\?]",ae))+"*"),{NOT_SCHEME:new RegExp(n("[^]",i,d,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",J,U),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",J,U),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",J,U),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",J,U),"g"),NOT_QUERY:new RegExp(n("[^\\%]",J,U,"[\\:\\@\\/\\?]",ae),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",J,U,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",J,U),"g"),UNRESERVED:new RegExp(J,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",J,W),"g"),PCT_ENCODED:new RegExp(w,"g"),IPV4ADDRESS:new RegExp("^("+se+")$"),IPV6ADDRESS:new RegExp("^\\[?("+rt+")"+a(a("\\%25|\\%(?!"+E+"{2})")+"("+Ke+")")+"?\\]?$")}}var m=p(!1),$=p(!0),R=function(){function u(i,d){var E=[],w=!0,F=!1,U=void 0;try{for(var W=i[Symbol.iterator](),Z;!(w=(Z=W.next()).done)&&(E.push(Z.value),!(d&&E.length===d));w=!0);}catch(ae){F=!0,U=ae}finally{try{!w&&W.return&&W.return()}finally{if(F)throw U}}return E}return function(i,d){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return u(i,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(u){if(Array.isArray(u)){for(var i=0,d=Array(u.length);i<u.length;i++)d[i]=u[i];return d}else return Array.from(u)},S=2147483647,P=36,_=1,h=26,b=38,T=700,A=72,M=128,Q="-",ne=/^xn--/,be=/[^\0-\x7E]/,Re=/[\x2E\u3002\uFF0E\uFF61]/g,qe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ze=P-_,ie=Math.floor,Te=String.fromCharCode;function fe(u){throw new RangeError(qe[u])}function Ye(u,i){for(var d=[],E=u.length;E--;)d[E]=i(u[E]);return d}function Ze(u,i){var d=u.split("@"),E="";d.length>1&&(E=d[0]+"@",u=d[1]),u=u.replace(Re,".");var w=u.split("."),F=Ye(w,i).join(".");return E+F}function ut(u){for(var i=[],d=0,E=u.length;d<E;){var w=u.charCodeAt(d++);if(w>=55296&&w<=56319&&d<E){var F=u.charCodeAt(d++);(F&64512)==56320?i.push(((w&1023)<<10)+(F&1023)+65536):(i.push(w),d--)}else i.push(w)}return i}var Rt=function(i){return String.fromCodePoint.apply(String,O(i))},lt=function(i){return i-48<10?i-22:i-65<26?i-65:i-97<26?i-97:P},j=function(i,d){return i+22+75*(i<26)-((d!=0)<<5)},v=function(i,d,E){var w=0;for(i=E?ie(i/T):i>>1,i+=ie(i/d);i>ze*h>>1;w+=P)i=ie(i/ze);return ie(w+(ze+1)*i/(i+b))},C=function(i){var d=[],E=i.length,w=0,F=M,U=A,W=i.lastIndexOf(Q);W<0&&(W=0);for(var Z=0;Z<W;++Z)i.charCodeAt(Z)>=128&&fe("not-basic"),d.push(i.charCodeAt(Z));for(var ae=W>0?W+1:0;ae<E;){for(var J=w,Y=1,se=P;;se+=P){ae>=E&&fe("invalid-input");var z=lt(i.charCodeAt(ae++));(z>=P||z>ie((S-w)/Y))&&fe("overflow"),w+=z*Y;var ee=se<=U?_:se>=U+h?h:se-U;if(z<ee)break;var ce=P-ee;Y>ie(S/ce)&&fe("overflow"),Y*=ce}var te=d.length+1;U=v(w-J,te,J==0),ie(w/te)>S-F&&fe("overflow"),F+=ie(w/te),w%=te,d.splice(w++,0,F)}return String.fromCodePoint.apply(String,d)},g=function(i){var d=[];i=ut(i);var E=i.length,w=M,F=0,U=A,W=!0,Z=!1,ae=void 0;try{for(var J=i[Symbol.iterator](),Y;!(W=(Y=J.next()).done);W=!0){var se=Y.value;se<128&&d.push(Te(se))}}catch(Ft){Z=!0,ae=Ft}finally{try{!W&&J.return&&J.return()}finally{if(Z)throw ae}}var z=d.length,ee=z;for(z&&d.push(Q);ee<E;){var ce=S,te=!0,Ge=!1,De=void 0;try{for(var Ae=i[Symbol.iterator](),vt;!(te=(vt=Ae.next()).done);te=!0){var tt=vt.value;tt>=w&&tt<ce&&(ce=tt)}}catch(Ft){Ge=!0,De=Ft}finally{try{!te&&Ae.return&&Ae.return()}finally{if(Ge)throw De}}var we=ee+1;ce-w>ie((S-F)/we)&&fe("overflow"),F+=(ce-w)*we,w=ce;var Me=!0,rt=!1,Ke=void 0;try{for(var Vt=i[Symbol.iterator](),Mn;!(Me=(Mn=Vt.next()).done);Me=!0){var Vn=Mn.value;if(Vn<w&&++F>S&&fe("overflow"),Vn==w){for(var Zt=F,xt=P;;xt+=P){var er=xt<=U?_:xt>=U+h?h:xt-U;if(Zt<er)break;var Fn=Zt-er,Un=P-er;d.push(Te(j(er+Fn%Un,0))),Zt=ie(Fn/Un)}d.push(Te(j(Zt,0))),U=v(F,we,ee==z),F=0,++ee}}}catch(Ft){rt=!0,Ke=Ft}finally{try{!Me&&Vt.return&&Vt.return()}finally{if(rt)throw Ke}}++F,++w}return d.join("")},s=function(i){return Ze(i,function(d){return ne.test(d)?C(d.slice(4).toLowerCase()):d})},l=function(i){return Ze(i,function(d){return be.test(d)?"xn--"+g(d):d})},N={version:"2.1.0",ucs2:{decode:ut,encode:Rt},decode:C,encode:g,toASCII:l,toUnicode:s},I={};function D(u){var i=u.charCodeAt(0),d=void 0;return i<16?d="%0"+i.toString(16).toUpperCase():i<128?d="%"+i.toString(16).toUpperCase():i<2048?d="%"+(i>>6|192).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase():d="%"+(i>>12|224).toString(16).toUpperCase()+"%"+(i>>6&63|128).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase(),d}function G(u){for(var i="",d=0,E=u.length;d<E;){var w=parseInt(u.substr(d+1,2),16);if(w<128)i+=String.fromCharCode(w),d+=3;else if(w>=194&&w<224){if(E-d>=6){var F=parseInt(u.substr(d+4,2),16);i+=String.fromCharCode((w&31)<<6|F&63)}else i+=u.substr(d,6);d+=6}else if(w>=224){if(E-d>=9){var U=parseInt(u.substr(d+4,2),16),W=parseInt(u.substr(d+7,2),16);i+=String.fromCharCode((w&15)<<12|(U&63)<<6|W&63)}else i+=u.substr(d,9);d+=9}else i+=u.substr(d,3),d+=3}return i}function B(u,i){function d(E){var w=G(E);return w.match(i.UNRESERVED)?w:E}return u.scheme&&(u.scheme=String(u.scheme).replace(i.PCT_ENCODED,d).toLowerCase().replace(i.NOT_SCHEME,"")),u.userinfo!==void 0&&(u.userinfo=String(u.userinfo).replace(i.PCT_ENCODED,d).replace(i.NOT_USERINFO,D).replace(i.PCT_ENCODED,c)),u.host!==void 0&&(u.host=String(u.host).replace(i.PCT_ENCODED,d).toLowerCase().replace(i.NOT_HOST,D).replace(i.PCT_ENCODED,c)),u.path!==void 0&&(u.path=String(u.path).replace(i.PCT_ENCODED,d).replace(u.scheme?i.NOT_PATH:i.NOT_PATH_NOSCHEME,D).replace(i.PCT_ENCODED,c)),u.query!==void 0&&(u.query=String(u.query).replace(i.PCT_ENCODED,d).replace(i.NOT_QUERY,D).replace(i.PCT_ENCODED,c)),u.fragment!==void 0&&(u.fragment=String(u.fragment).replace(i.PCT_ENCODED,d).replace(i.NOT_FRAGMENT,D).replace(i.PCT_ENCODED,c)),u}function re(u){return u.replace(/^0*(.*)/,"$1")||"0"}function je(u,i){var d=u.match(i.IPV4ADDRESS)||[],E=R(d,2),w=E[1];return w?w.split(".").map(re).join("."):u}function dt(u,i){var d=u.match(i.IPV6ADDRESS)||[],E=R(d,3),w=E[1],F=E[2];if(w){for(var U=w.toLowerCase().split("::").reverse(),W=R(U,2),Z=W[0],ae=W[1],J=ae?ae.split(":").map(re):[],Y=Z.split(":").map(re),se=i.IPV4ADDRESS.test(Y[Y.length-1]),z=se?7:8,ee=Y.length-z,ce=Array(z),te=0;te<z;++te)ce[te]=J[te]||Y[ee+te]||"";se&&(ce[z-1]=je(ce[z-1],i));var Ge=ce.reduce(function(we,Me,rt){if(!Me||Me==="0"){var Ke=we[we.length-1];Ke&&Ke.index+Ke.length===rt?Ke.length++:we.push({index:rt,length:1})}return we},[]),De=Ge.sort(function(we,Me){return Me.length-we.length})[0],Ae=void 0;if(De&&De.length>1){var vt=ce.slice(0,De.index),tt=ce.slice(De.index+De.length);Ae=vt.join(":")+"::"+tt.join(":")}else Ae=ce.join(":");return F&&(Ae+="%"+F),Ae}else return u}var Tt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,jt="".match(/(){0}/)[1]===void 0;function _e(u){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d={},E=i.iri!==!1?$:m;i.reference==="suffix"&&(u=(i.scheme?i.scheme+":":"")+"//"+u);var w=u.match(Tt);if(w){jt?(d.scheme=w[1],d.userinfo=w[3],d.host=w[4],d.port=parseInt(w[5],10),d.path=w[6]||"",d.query=w[7],d.fragment=w[8],isNaN(d.port)&&(d.port=w[5])):(d.scheme=w[1]||void 0,d.userinfo=u.indexOf("@")!==-1?w[3]:void 0,d.host=u.indexOf("//")!==-1?w[4]:void 0,d.port=parseInt(w[5],10),d.path=w[6]||"",d.query=u.indexOf("?")!==-1?w[7]:void 0,d.fragment=u.indexOf("#")!==-1?w[8]:void 0,isNaN(d.port)&&(d.port=u.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?w[4]:void 0)),d.host&&(d.host=dt(je(d.host,E),E)),d.scheme===void 0&&d.userinfo===void 0&&d.host===void 0&&d.port===void 0&&!d.path&&d.query===void 0?d.reference="same-document":d.scheme===void 0?d.reference="relative":d.fragment===void 0?d.reference="absolute":d.reference="uri",i.reference&&i.reference!=="suffix"&&i.reference!==d.reference&&(d.error=d.error||"URI is not a "+i.reference+" reference.");var F=I[(i.scheme||d.scheme||"").toLowerCase()];if(!i.unicodeSupport&&(!F||!F.unicodeSupport)){if(d.host&&(i.domainHost||F&&F.domainHost))try{d.host=N.toASCII(d.host.replace(E.PCT_ENCODED,G).toLowerCase())}catch(U){d.error=d.error||"Host's domain name can not be converted to ASCII via punycode: "+U}B(d,m)}else B(d,E);F&&F.parse&&F.parse(d,i)}else d.error=d.error||"URI can not be parsed.";return d}function It(u,i){var d=i.iri!==!1?$:m,E=[];return u.userinfo!==void 0&&(E.push(u.userinfo),E.push("@")),u.host!==void 0&&E.push(dt(je(String(u.host),d),d).replace(d.IPV6ADDRESS,function(w,F,U){return"["+F+(U?"%25"+U:"")+"]"})),(typeof u.port=="number"||typeof u.port=="string")&&(E.push(":"),E.push(String(u.port))),E.length?E.join(""):void 0}var ft=/^\.\.?\//,ht=/^\/\.(\/|$)/,pt=/^\/\.\.(\/|$)/,kt=/^\/?(?:.|\n)*?(?=\/|$)/;function Ie(u){for(var i=[];u.length;)if(u.match(ft))u=u.replace(ft,"");else if(u.match(ht))u=u.replace(ht,"/");else if(u.match(pt))u=u.replace(pt,"/"),i.pop();else if(u==="."||u==="..")u="";else{var d=u.match(kt);if(d){var E=d[0];u=u.slice(E.length),i.push(E)}else throw new Error("Unexpected dot segment condition")}return i.join("")}function ye(u){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=i.iri?$:m,E=[],w=I[(i.scheme||u.scheme||"").toLowerCase()];if(w&&w.serialize&&w.serialize(u,i),u.host&&!d.IPV6ADDRESS.test(u.host)){if(i.domainHost||w&&w.domainHost)try{u.host=i.iri?N.toUnicode(u.host):N.toASCII(u.host.replace(d.PCT_ENCODED,G).toLowerCase())}catch(W){u.error=u.error||"Host's domain name can not be converted to "+(i.iri?"Unicode":"ASCII")+" via punycode: "+W}}B(u,d),i.reference!=="suffix"&&u.scheme&&(E.push(u.scheme),E.push(":"));var F=It(u,i);if(F!==void 0&&(i.reference!=="suffix"&&E.push("//"),E.push(F),u.path&&u.path.charAt(0)!=="/"&&E.push("/")),u.path!==void 0){var U=u.path;!i.absolutePath&&(!w||!w.absolutePath)&&(U=Ie(U)),F===void 0&&(U=U.replace(/^\/\//,"/%2F")),E.push(U)}return u.query!==void 0&&(E.push("?"),E.push(u.query)),u.fragment!==void 0&&(E.push("#"),E.push(u.fragment)),E.join("")}function mt(u,i){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments[3],w={};return E||(u=_e(ye(u,d),d),i=_e(ye(i,d),d)),d=d||{},!d.tolerant&&i.scheme?(w.scheme=i.scheme,w.userinfo=i.userinfo,w.host=i.host,w.port=i.port,w.path=Ie(i.path||""),w.query=i.query):(i.userinfo!==void 0||i.host!==void 0||i.port!==void 0?(w.userinfo=i.userinfo,w.host=i.host,w.port=i.port,w.path=Ie(i.path||""),w.query=i.query):(i.path?(i.path.charAt(0)==="/"?w.path=Ie(i.path):((u.userinfo!==void 0||u.host!==void 0||u.port!==void 0)&&!u.path?w.path="/"+i.path:u.path?w.path=u.path.slice(0,u.path.lastIndexOf("/")+1)+i.path:w.path=i.path,w.path=Ie(w.path)),w.query=i.query):(w.path=u.path,i.query!==void 0?w.query=i.query:w.query=u.query),w.userinfo=u.userinfo,w.host=u.host,w.port=u.port),w.scheme=u.scheme),w.fragment=i.fragment,w}function Dt(u,i,d){var E=y({scheme:"null"},d);return ye(mt(_e(u,E),_e(i,E),E,!0),E)}function xe(u,i){return typeof u=="string"?u=ye(_e(u,i),i):o(u)==="object"&&(u=_e(ye(u,i),i)),u}function At(u,i,d){return typeof u=="string"?u=ye(_e(u,d),d):o(u)==="object"&&(u=ye(u,d)),typeof i=="string"?i=ye(_e(i,d),d):o(i)==="object"&&(i=ye(i,d)),u===i}function Yt(u,i){return u&&u.toString().replace(!i||!i.iri?m.ESCAPE:$.ESCAPE,D)}function ge(u,i){return u&&u.toString().replace(!i||!i.iri?m.PCT_ENCODED:$.PCT_ENCODED,G)}var et={scheme:"http",domainHost:!0,parse:function(i,d){return i.host||(i.error=i.error||"HTTP URIs must have a host."),i},serialize:function(i,d){var E=String(i.scheme).toLowerCase()==="https";return(i.port===(E?443:80)||i.port==="")&&(i.port=void 0),i.path||(i.path="/"),i}},Cn={scheme:"https",domainHost:et.domainHost,parse:et.parse,serialize:et.serialize};function Rn(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}var Mt={scheme:"ws",domainHost:!0,parse:function(i,d){var E=i;return E.secure=Rn(E),E.resourceName=(E.path||"/")+(E.query?"?"+E.query:""),E.path=void 0,E.query=void 0,E},serialize:function(i,d){if((i.port===(Rn(i)?443:80)||i.port==="")&&(i.port=void 0),typeof i.secure=="boolean"&&(i.scheme=i.secure?"wss":"ws",i.secure=void 0),i.resourceName){var E=i.resourceName.split("?"),w=R(E,2),F=w[0],U=w[1];i.path=F&&F!=="/"?F:void 0,i.query=U,i.resourceName=void 0}return i.fragment=void 0,i}},Tn={scheme:"wss",domainHost:Mt.domainHost,parse:Mt.parse,serialize:Mt.serialize},Za={},jn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ke="[0-9A-Fa-f]",xa=a(a("%[EFef]"+ke+"%"+ke+ke+"%"+ke+ke)+"|"+a("%[89A-Fa-f]"+ke+"%"+ke+ke)+"|"+a("%"+ke+ke)),es="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ts="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",rs=n(ts,'[\\"\\\\]'),ns="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",as=new RegExp(jn,"g"),yt=new RegExp(xa,"g"),ss=new RegExp(n("[^]",es,"[\\.]",'[\\"]',rs),"g"),In=new RegExp(n("[^]",jn,ns),"g"),os=In;function gr(u){var i=G(u);return i.match(as)?i:u}var kn={scheme:"mailto",parse:function(i,d){var E=i,w=E.to=E.path?E.path.split(","):[];if(E.path=void 0,E.query){for(var F=!1,U={},W=E.query.split("&"),Z=0,ae=W.length;Z<ae;++Z){var J=W[Z].split("=");switch(J[0]){case"to":for(var Y=J[1].split(","),se=0,z=Y.length;se<z;++se)w.push(Y[se]);break;case"subject":E.subject=ge(J[1],d);break;case"body":E.body=ge(J[1],d);break;default:F=!0,U[ge(J[0],d)]=ge(J[1],d);break}}F&&(E.headers=U)}E.query=void 0;for(var ee=0,ce=w.length;ee<ce;++ee){var te=w[ee].split("@");if(te[0]=ge(te[0]),d.unicodeSupport)te[1]=ge(te[1],d).toLowerCase();else try{te[1]=N.toASCII(ge(te[1],d).toLowerCase())}catch(Ge){E.error=E.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ge}w[ee]=te.join("@")}return E},serialize:function(i,d){var E=i,w=f(i.to);if(w){for(var F=0,U=w.length;F<U;++F){var W=String(w[F]),Z=W.lastIndexOf("@"),ae=W.slice(0,Z).replace(yt,gr).replace(yt,c).replace(ss,D),J=W.slice(Z+1);try{J=d.iri?N.toUnicode(J):N.toASCII(ge(J,d).toLowerCase())}catch(ee){E.error=E.error||"Email address's domain name can not be converted to "+(d.iri?"Unicode":"ASCII")+" via punycode: "+ee}w[F]=ae+"@"+J}E.path=w.join(",")}var Y=i.headers=i.headers||{};i.subject&&(Y.subject=i.subject),i.body&&(Y.body=i.body);var se=[];for(var z in Y)Y[z]!==Za[z]&&se.push(z.replace(yt,gr).replace(yt,c).replace(In,D)+"="+Y[z].replace(yt,gr).replace(yt,c).replace(os,D));return se.length&&(E.query=se.join("&")),E}},is=/^([^\:]+)\:(.*)/,Dn={scheme:"urn",parse:function(i,d){var E=i.path&&i.path.match(is),w=i;if(E){var F=d.scheme||w.scheme||"urn",U=E[1].toLowerCase(),W=E[2],Z=F+":"+(d.nid||U),ae=I[Z];w.nid=U,w.nss=W,w.path=void 0,ae&&(w=ae.parse(w,d))}else w.error=w.error||"URN can not be parsed.";return w},serialize:function(i,d){var E=d.scheme||i.scheme||"urn",w=i.nid,F=E+":"+(d.nid||w),U=I[F];U&&(i=U.serialize(i,d));var W=i,Z=i.nss;return W.path=(w||d.nid)+":"+Z,W}},cs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,An={scheme:"urn:uuid",parse:function(i,d){var E=i;return E.uuid=E.nss,E.nss=void 0,!d.tolerant&&(!E.uuid||!E.uuid.match(cs))&&(E.error=E.error||"UUID is not valid."),E},serialize:function(i,d){var E=i;return E.nss=(i.uuid||"").toLowerCase(),E}};I[et.scheme]=et,I[Cn.scheme]=Cn,I[Mt.scheme]=Mt,I[Tn.scheme]=Tn,I[kn.scheme]=kn,I[Dn.scheme]=Dn,I[An.scheme]=An,r.SCHEMES=I,r.pctEncChar=D,r.pctDecChars=G,r.parse=_e,r.removeDotSegments=Ie,r.serialize=ye,r.resolveComponents=mt,r.resolve=Dt,r.normalize=xe,r.equal=At,r.escapeComponent=Yt,r.unescapeComponent=ge,Object.defineProperty(r,"__esModule",{value:!0})})})(Ir,Ir.exports);var _i=Ir.exports;Object.defineProperty(Wr,"__esModule",{value:!0});const La=_i;La.code='require("ajv/dist/runtime/uri").default';Wr.default=La;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ce;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=H;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Qt,a=Nt,o=it,c=$e,f=H,y=de,p=ue,m=k,$=$i,R=Wr,O=(j,v)=>new RegExp(j,v);O.code="new RegExp";const S=["removeAdditional","useDefaults","coerceTypes"],P=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function T(j){var v,C,g,s,l,N,I,D,G,B,re,je,dt,Tt,jt,_e,It,ft,ht,pt,kt,Ie,ye,mt,Dt;const xe=j.strict,At=(v=j.code)===null||v===void 0?void 0:v.optimize,Yt=At===!0||At===void 0?1:At||0,ge=(g=(C=j.code)===null||C===void 0?void 0:C.regExp)!==null&&g!==void 0?g:O,et=(s=j.uriResolver)!==null&&s!==void 0?s:R.default;return{strictSchema:(N=(l=j.strictSchema)!==null&&l!==void 0?l:xe)!==null&&N!==void 0?N:!0,strictNumbers:(D=(I=j.strictNumbers)!==null&&I!==void 0?I:xe)!==null&&D!==void 0?D:!0,strictTypes:(B=(G=j.strictTypes)!==null&&G!==void 0?G:xe)!==null&&B!==void 0?B:"log",strictTuples:(je=(re=j.strictTuples)!==null&&re!==void 0?re:xe)!==null&&je!==void 0?je:"log",strictRequired:(Tt=(dt=j.strictRequired)!==null&&dt!==void 0?dt:xe)!==null&&Tt!==void 0?Tt:!1,code:j.code?{...j.code,optimize:Yt,regExp:ge}:{optimize:Yt,regExp:ge},loopRequired:(jt=j.loopRequired)!==null&&jt!==void 0?jt:b,loopEnum:(_e=j.loopEnum)!==null&&_e!==void 0?_e:b,meta:(It=j.meta)!==null&&It!==void 0?It:!0,messages:(ft=j.messages)!==null&&ft!==void 0?ft:!0,inlineRefs:(ht=j.inlineRefs)!==null&&ht!==void 0?ht:!0,schemaId:(pt=j.schemaId)!==null&&pt!==void 0?pt:"$id",addUsedSchema:(kt=j.addUsedSchema)!==null&&kt!==void 0?kt:!0,validateSchema:(Ie=j.validateSchema)!==null&&Ie!==void 0?Ie:!0,validateFormats:(ye=j.validateFormats)!==null&&ye!==void 0?ye:!0,unicodeRegExp:(mt=j.unicodeRegExp)!==null&&mt!==void 0?mt:!0,int32range:(Dt=j.int32range)!==null&&Dt!==void 0?Dt:!0,uriResolver:et}}class A{constructor(v={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,v=this.opts={...v,...T(v)};const{es5:C,lines:g}=this.opts.code;this.scope=new f.ValueScope({scope:{},prefixes:P,es5:C,lines:g}),this.logger=ie(v.logger);const s=v.validateFormats;v.validateFormats=!1,this.RULES=(0,o.getRules)(),M.call(this,_,v,"NOT SUPPORTED"),M.call(this,h,v,"DEPRECATED","warn"),this._metaOpts=qe.call(this),v.formats&&be.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),v.keywords&&Re.call(this,v.keywords),typeof v.meta=="object"&&this.addMetaSchema(v.meta),ne.call(this),v.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:v,meta:C,schemaId:g}=this.opts;let s=$;g==="id"&&(s={...$},s.id=s.$id,delete s.$id),C&&v&&this.addMetaSchema(s,s[g],!1)}defaultMeta(){const{meta:v,schemaId:C}=this.opts;return this.opts.defaultMeta=typeof v=="object"?v[C]||v:void 0}validate(v,C){let g;if(typeof v=="string"){if(g=this.getSchema(v),!g)throw new Error(`no schema with key or ref "${v}"`)}else g=this.compile(v);const s=g(C);return"$async"in g||(this.errors=g.errors),s}compile(v,C){const g=this._addSchema(v,C);return g.validate||this._compileSchemaEnv(g)}compileAsync(v,C){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:g}=this.opts;return s.call(this,v,C);async function s(B,re){await l.call(this,B.$schema);const je=this._addSchema(B,re);return je.validate||N.call(this,je)}async function l(B){B&&!this.getSchema(B)&&await s.call(this,{$ref:B},!0)}async function N(B){try{return this._compileSchemaEnv(B)}catch(re){if(!(re instanceof a.default))throw re;return I.call(this,re),await D.call(this,re.missingSchema),N.call(this,B)}}function I({missingSchema:B,missingRef:re}){if(this.refs[B])throw new Error(`AnySchema ${B} is loaded but ${re} cannot be resolved`)}async function D(B){const re=await G.call(this,B);this.refs[B]||await l.call(this,re.$schema),this.refs[B]||this.addSchema(re,B,C)}async function G(B){const re=this._loading[B];if(re)return re;try{return await(this._loading[B]=g(B))}finally{delete this._loading[B]}}}addSchema(v,C,g,s=this.opts.validateSchema){if(Array.isArray(v)){for(const N of v)this.addSchema(N,void 0,g,s);return this}let l;if(typeof v=="object"){const{schemaId:N}=this.opts;if(l=v[N],l!==void 0&&typeof l!="string")throw new Error(`schema ${N} must be string`)}return C=(0,y.normalizeId)(C||l),this._checkUnique(C),this.schemas[C]=this._addSchema(v,g,C,s,!0),this}addMetaSchema(v,C,g=this.opts.validateSchema){return this.addSchema(v,C,!0,g),this}validateSchema(v,C){if(typeof v=="boolean")return!0;let g;if(g=v.$schema,g!==void 0&&typeof g!="string")throw new Error("$schema must be a string");if(g=g||this.opts.defaultMeta||this.defaultMeta(),!g)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const s=this.validate(g,v);if(!s&&C){const l="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(l);else throw new Error(l)}return s}getSchema(v){let C;for(;typeof(C=Q.call(this,v))=="string";)v=C;if(C===void 0){const{schemaId:g}=this.opts,s=new c.SchemaEnv({schema:{},schemaId:g});if(C=c.resolveSchema.call(this,s,v),!C)return;this.refs[v]=C}return C.validate||this._compileSchemaEnv(C)}removeSchema(v){if(v instanceof RegExp)return this._removeAllSchemas(this.schemas,v),this._removeAllSchemas(this.refs,v),this;switch(typeof v){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const C=Q.call(this,v);return typeof C=="object"&&this._cache.delete(C.schema),delete this.schemas[v],delete this.refs[v],this}case"object":{const C=v;this._cache.delete(C);let g=v[this.opts.schemaId];return g&&(g=(0,y.normalizeId)(g),delete this.schemas[g],delete this.refs[g]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(v){for(const C of v)this.addKeyword(C);return this}addKeyword(v,C){let g;if(typeof v=="string")g=v,typeof C=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),C.keyword=g);else if(typeof v=="object"&&C===void 0){if(C=v,g=C.keyword,Array.isArray(g)&&!g.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(fe.call(this,g,C),!C)return(0,m.eachItem)(g,l=>Ye.call(this,l)),this;ut.call(this,C);const s={...C,type:(0,p.getJSONTypes)(C.type),schemaType:(0,p.getJSONTypes)(C.schemaType)};return(0,m.eachItem)(g,s.type.length===0?l=>Ye.call(this,l,s):l=>s.type.forEach(N=>Ye.call(this,l,s,N))),this}getKeyword(v){const C=this.RULES.all[v];return typeof C=="object"?C.definition:!!C}removeKeyword(v){const{RULES:C}=this;delete C.keywords[v],delete C.all[v];for(const g of C.rules){const s=g.rules.findIndex(l=>l.keyword===v);s>=0&&g.rules.splice(s,1)}return this}addFormat(v,C){return typeof C=="string"&&(C=new RegExp(C)),this.formats[v]=C,this}errorsText(v=this.errors,{separator:C=", ",dataVar:g="data"}={}){return!v||v.length===0?"No errors":v.map(s=>`${g}${s.instancePath} ${s.message}`).reduce((s,l)=>s+C+l)}$dataMetaSchema(v,C){const g=this.RULES.all;v=JSON.parse(JSON.stringify(v));for(const s of C){const l=s.split("/").slice(1);let N=v;for(const I of l)N=N[I];for(const I in g){const D=g[I];if(typeof D!="object")continue;const{$data:G}=D.definition,B=N[I];G&&B&&(N[I]=lt(B))}}return v}_removeAllSchemas(v,C){for(const g in v){const s=v[g];(!C||C.test(g))&&(typeof s=="string"?delete v[g]:s&&!s.meta&&(this._cache.delete(s.schema),delete v[g]))}}_addSchema(v,C,g,s=this.opts.validateSchema,l=this.opts.addUsedSchema){let N;const{schemaId:I}=this.opts;if(typeof v=="object")N=v[I];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof v!="boolean")throw new Error("schema must be object or boolean")}let D=this._cache.get(v);if(D!==void 0)return D;g=(0,y.normalizeId)(N||g);const G=y.getSchemaRefs.call(this,v,g);return D=new c.SchemaEnv({schema:v,schemaId:I,meta:C,baseId:g,localRefs:G}),this._cache.set(D.schema,D),l&&!g.startsWith("#")&&(g&&this._checkUnique(g),this.refs[g]=D),s&&this.validateSchema(v,!0),D}_checkUnique(v){if(this.schemas[v]||this.refs[v])throw new Error(`schema with key or id "${v}" already exists`)}_compileSchemaEnv(v){if(v.meta?this._compileMetaSchema(v):c.compileSchema.call(this,v),!v.validate)throw new Error("ajv implementation error");return v.validate}_compileMetaSchema(v){const C=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,v)}finally{this.opts=C}}}A.ValidationError=n.default,A.MissingRefError=a.default,e.default=A;function M(j,v,C,g="error"){for(const s in j){const l=s;l in v&&this.logger[g](`${C}: option ${s}. ${j[l]}`)}}function Q(j){return j=(0,y.normalizeId)(j),this.schemas[j]||this.refs[j]}function ne(){const j=this.opts.schemas;if(j)if(Array.isArray(j))this.addSchema(j);else for(const v in j)this.addSchema(j[v],v)}function be(){for(const j in this.opts.formats){const v=this.opts.formats[j];v&&this.addFormat(j,v)}}function Re(j){if(Array.isArray(j)){this.addVocabulary(j);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const v in j){const C=j[v];C.keyword||(C.keyword=v),this.addKeyword(C)}}function qe(){const j={...this.opts};for(const v of S)delete j[v];return j}const ze={log(){},warn(){},error(){}};function ie(j){if(j===!1)return ze;if(j===void 0)return console;if(j.log&&j.warn&&j.error)return j;throw new Error("logger must implement log, warn and error methods")}const Te=/^[a-z_$][a-z0-9_$:-]*$/i;function fe(j,v){const{RULES:C}=this;if((0,m.eachItem)(j,g=>{if(C.keywords[g])throw new Error(`Keyword ${g} is already defined`);if(!Te.test(g))throw new Error(`Keyword ${g} has invalid name`)}),!!v&&v.$data&&!("code"in v||"validate"in v))throw new Error('$data keyword must have "code" or "validate" function')}function Ye(j,v,C){var g;const s=v==null?void 0:v.post;if(C&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:l}=this;let N=s?l.post:l.rules.find(({type:D})=>D===C);if(N||(N={type:C,rules:[]},l.rules.push(N)),l.keywords[j]=!0,!v)return;const I={keyword:j,definition:{...v,type:(0,p.getJSONTypes)(v.type),schemaType:(0,p.getJSONTypes)(v.schemaType)}};v.before?Ze.call(this,N,I,v.before):N.rules.push(I),l.all[j]=I,(g=v.implements)===null||g===void 0||g.forEach(D=>this.addKeyword(D))}function Ze(j,v,C){const g=j.rules.findIndex(s=>s.keyword===C);g>=0?j.rules.splice(g,0,v):(j.rules.push(v),this.logger.warn(`rule ${C} is not defined`))}function ut(j){let{metaSchema:v}=j;v!==void 0&&(j.$data&&this.opts.$data&&(v=lt(v)),j.validateSchema=this.compile(v,!0))}const Rt={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function lt(j){return{anyOf:[j,Rt]}}})(la);var Qr={},Xr={},Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});const gi={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Yr.default=gi;var ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.callRef=ct.getValidate=void 0;const wi=Nt,Xn=L,ve=H,_t=Ue,Yn=$e,tr=k,Ei={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:a,schemaEnv:o,validateName:c,opts:f,self:y}=n,{root:p}=o;if((r==="#"||r==="#/")&&a===p.baseId)return $();const m=Yn.resolveRef.call(y,p,a,r);if(m===void 0)throw new wi.default(n.opts.uriResolver,a,r);if(m instanceof Yn.SchemaEnv)return R(m);return O(m);function $(){if(o===p)return ir(e,c,o,o.$async);const S=t.scopeValue("root",{ref:p});return ir(e,(0,ve._)`${S}.validate`,p,p.$async)}function R(S){const P=Ha(e,S);ir(e,P,S,S.$async)}function O(S){const P=t.scopeValue("schema",f.code.source===!0?{ref:S,code:(0,ve.stringify)(S)}:{ref:S}),_=t.name("valid"),h=e.subschema({schema:S,dataTypes:[],schemaPath:ve.nil,topSchemaRef:P,errSchemaPath:r},_);e.mergeEvaluated(h),e.ok(_)}}};function Ha(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,ve._)`${r.scopeValue("wrapper",{ref:t})}.validate`}ct.getValidate=Ha;function ir(e,t,r,n){const{gen:a,it:o}=e,{allErrors:c,schemaEnv:f,opts:y}=o,p=y.passContext?_t.default.this:ve.nil;n?m():$();function m(){if(!f.$async)throw new Error("async schema referenced by sync schema");const S=a.let("valid");a.try(()=>{a.code((0,ve._)`await ${(0,Xn.callValidateCode)(e,t,p)}`),O(t),c||a.assign(S,!0)},P=>{a.if((0,ve._)`!(${P} instanceof ${o.ValidationError})`,()=>a.throw(P)),R(P),c||a.assign(S,!1)}),e.ok(S)}function $(){e.result((0,Xn.callValidateCode)(e,t,p),()=>O(t),()=>R(t))}function R(S){const P=(0,ve._)`${S}.errors`;a.assign(_t.default.vErrors,(0,ve._)`${_t.default.vErrors} === null ? ${P} : ${_t.default.vErrors}.concat(${P})`),a.assign(_t.default.errors,(0,ve._)`${_t.default.vErrors}.length`)}function O(S){var P;if(!o.opts.unevaluated)return;const _=(P=r==null?void 0:r.validate)===null||P===void 0?void 0:P.evaluated;if(o.props!==!0)if(_&&!_.dynamicProps)_.props!==void 0&&(o.props=tr.mergeEvaluated.props(a,_.props,o.props));else{const h=a.var("props",(0,ve._)`${S}.evaluated.props`);o.props=tr.mergeEvaluated.props(a,h,o.props,ve.Name)}if(o.items!==!0)if(_&&!_.dynamicItems)_.items!==void 0&&(o.items=tr.mergeEvaluated.items(a,_.items,o.items));else{const h=a.var("items",(0,ve._)`${S}.evaluated.items`);o.items=tr.mergeEvaluated.items(a,h,o.items,ve.Name)}}}ct.callRef=ir;ct.default=Ei;Object.defineProperty(Xr,"__esModule",{value:!0});const bi=Yr,Si=ct,Pi=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",bi.default,Si.default];Xr.default=Pi;var Zr={},xr={};Object.defineProperty(xr,"__esModule",{value:!0});const dr=H,Be=dr.operators,fr={maximum:{okStr:"<=",ok:Be.LTE,fail:Be.GT},minimum:{okStr:">=",ok:Be.GTE,fail:Be.LT},exclusiveMaximum:{okStr:"<",ok:Be.LT,fail:Be.GTE},exclusiveMinimum:{okStr:">",ok:Be.GT,fail:Be.LTE}},Ni={message:({keyword:e,schemaCode:t})=>(0,dr.str)`must be ${fr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,dr._)`{comparison: ${fr[e].okStr}, limit: ${t}}`},Oi={keyword:Object.keys(fr),type:"number",schemaType:"number",$data:!0,error:Ni,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,dr._)`${r} ${fr[t].fail} ${n} || isNaN(${r})`)}};xr.default=Oi;var en={};Object.defineProperty(en,"__esModule",{value:!0});const Lt=H,Ci={message:({schemaCode:e})=>(0,Lt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Lt._)`{multipleOf: ${e}}`},Ri={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ci,code(e){const{gen:t,data:r,schemaCode:n,it:a}=e,o=a.opts.multipleOfPrecision,c=t.let("res"),f=o?(0,Lt._)`Math.abs(Math.round(${c}) - ${c}) > 1e-${o}`:(0,Lt._)`${c} !== parseInt(${c})`;e.fail$data((0,Lt._)`(${n} === 0 || (${c} = ${r}/${n}, ${f}))`)}};en.default=Ri;var tn={},rn={};Object.defineProperty(rn,"__esModule",{value:!0});function Ga(e){const t=e.length;let r=0,n=0,a;for(;n<t;)r++,a=e.charCodeAt(n++),a>=55296&&a<=56319&&n<t&&(a=e.charCodeAt(n),(a&64512)===56320&&n++);return r}rn.default=Ga;Ga.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(tn,"__esModule",{value:!0});const st=H,Ti=k,ji=rn,Ii={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,st.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,st._)`{limit: ${e}}`},ki={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ii,code(e){const{keyword:t,data:r,schemaCode:n,it:a}=e,o=t==="maxLength"?st.operators.GT:st.operators.LT,c=a.opts.unicode===!1?(0,st._)`${r}.length`:(0,st._)`${(0,Ti.useFunc)(e.gen,ji.default)}(${r})`;e.fail$data((0,st._)`${c} ${o} ${n}`)}};tn.default=ki;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});const Di=L,hr=H,Ai={message:({schemaCode:e})=>(0,hr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,hr._)`{pattern: ${e}}`},Mi={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Ai,code(e){const{data:t,$data:r,schema:n,schemaCode:a,it:o}=e,c=o.opts.unicodeRegExp?"u":"",f=r?(0,hr._)`(new RegExp(${a}, ${c}))`:(0,Di.usePattern)(e,n);e.fail$data((0,hr._)`!${f}.test(${t})`)}};nn.default=Mi;var an={};Object.defineProperty(an,"__esModule",{value:!0});const Ht=H,Vi={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,Ht.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Ht._)`{limit: ${e}}`},Fi={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Vi,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxProperties"?Ht.operators.GT:Ht.operators.LT;e.fail$data((0,Ht._)`Object.keys(${r}).length ${a} ${n}`)}};an.default=Fi;var sn={};Object.defineProperty(sn,"__esModule",{value:!0});const qt=L,Gt=H,Ui=k,qi={message:({params:{missingProperty:e}})=>(0,Gt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Gt._)`{missingProperty: ${e}}`},zi={keyword:"required",type:"object",schemaType:"array",$data:!0,error:qi,code(e){const{gen:t,schema:r,schemaCode:n,data:a,$data:o,it:c}=e,{opts:f}=c;if(!o&&r.length===0)return;const y=r.length>=f.loopRequired;if(c.allErrors?p():m(),f.strictRequired){const O=e.parentSchema.properties,{definedProperties:S}=e.it;for(const P of r)if((O==null?void 0:O[P])===void 0&&!S.has(P)){const _=c.schemaEnv.baseId+c.errSchemaPath,h=`required property "${P}" is not defined at "${_}" (strictRequired)`;(0,Ui.checkStrictMode)(c,h,c.opts.strictRequired)}}function p(){if(y||o)e.block$data(Gt.nil,$);else for(const O of r)(0,qt.checkReportMissingProp)(e,O)}function m(){const O=t.let("missing");if(y||o){const S=t.let("valid",!0);e.block$data(S,()=>R(O,S)),e.ok(S)}else t.if((0,qt.checkMissingProp)(e,r,O)),(0,qt.reportMissingProp)(e,O),t.else()}function $(){t.forOf("prop",n,O=>{e.setParams({missingProperty:O}),t.if((0,qt.noPropertyInData)(t,a,O,f.ownProperties),()=>e.error())})}function R(O,S){e.setParams({missingProperty:O}),t.forOf(O,n,()=>{t.assign(S,(0,qt.propertyInData)(t,a,O,f.ownProperties)),t.if((0,Gt.not)(S),()=>{e.error(),t.break()})},Gt.nil)}}};sn.default=zi;var on={};Object.defineProperty(on,"__esModule",{value:!0});const Jt=H,Ki={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,Jt.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Jt._)`{limit: ${e}}`},Li={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Ki,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxItems"?Jt.operators.GT:Jt.operators.LT;e.fail$data((0,Jt._)`${r}.length ${a} ${n}`)}};on.default=Li;var cn={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});const Ja=Na;Ja.code='require("ajv/dist/runtime/equal").default';Xt.default=Ja;Object.defineProperty(cn,"__esModule",{value:!0});const Pr=ue,le=H,Hi=k,Gi=Xt,Ji={message:({params:{i:e,j:t}})=>(0,le.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,le._)`{i: ${e}, j: ${t}}`},Bi={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Ji,code(e){const{gen:t,data:r,$data:n,schema:a,parentSchema:o,schemaCode:c,it:f}=e;if(!n&&!a)return;const y=t.let("valid"),p=o.items?(0,Pr.getSchemaTypes)(o.items):[];e.block$data(y,m,(0,le._)`${c} === false`),e.ok(y);function m(){const S=t.let("i",(0,le._)`${r}.length`),P=t.let("j");e.setParams({i:S,j:P}),t.assign(y,!0),t.if((0,le._)`${S} > 1`,()=>($()?R:O)(S,P))}function $(){return p.length>0&&!p.some(S=>S==="object"||S==="array")}function R(S,P){const _=t.name("item"),h=(0,Pr.checkDataTypes)(p,_,f.opts.strictNumbers,Pr.DataType.Wrong),b=t.const("indices",(0,le._)`{}`);t.for((0,le._)`;${S}--;`,()=>{t.let(_,(0,le._)`${r}[${S}]`),t.if(h,(0,le._)`continue`),p.length>1&&t.if((0,le._)`typeof ${_} == "string"`,(0,le._)`${_} += "_"`),t.if((0,le._)`typeof ${b}[${_}] == "number"`,()=>{t.assign(P,(0,le._)`${b}[${_}]`),e.error(),t.assign(y,!1).break()}).code((0,le._)`${b}[${_}] = ${S}`)})}function O(S,P){const _=(0,Hi.useFunc)(t,Gi.default),h=t.name("outer");t.label(h).for((0,le._)`;${S}--;`,()=>t.for((0,le._)`${P} = ${S}; ${P}--;`,()=>t.if((0,le._)`${_}(${r}[${S}], ${r}[${P}])`,()=>{e.error(),t.assign(y,!1).break(h)})))}}};cn.default=Bi;var un={};Object.defineProperty(un,"__esModule",{value:!0});const kr=H,Wi=k,Qi=Xt,Xi={message:"must be equal to constant",params:({schemaCode:e})=>(0,kr._)`{allowedValue: ${e}}`},Yi={keyword:"const",$data:!0,error:Xi,code(e){const{gen:t,data:r,$data:n,schemaCode:a,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,kr._)`!${(0,Wi.useFunc)(t,Qi.default)}(${r}, ${a})`):e.fail((0,kr._)`${o} !== ${r}`)}};un.default=Yi;var ln={};Object.defineProperty(ln,"__esModule",{value:!0});const zt=H,Zi=k,xi=Xt,ec={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,zt._)`{allowedValues: ${e}}`},tc={keyword:"enum",schemaType:"array",$data:!0,error:ec,code(e){const{gen:t,data:r,$data:n,schema:a,schemaCode:o,it:c}=e;if(!n&&a.length===0)throw new Error("enum must have non-empty array");const f=a.length>=c.opts.loopEnum;let y;const p=()=>y??(y=(0,Zi.useFunc)(t,xi.default));let m;if(f||n)m=t.let("valid"),e.block$data(m,$);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const O=t.const("vSchema",o);m=(0,zt.or)(...a.map((S,P)=>R(O,P)))}e.pass(m);function $(){t.assign(m,!1),t.forOf("v",o,O=>t.if((0,zt._)`${p()}(${r}, ${O})`,()=>t.assign(m,!0).break()))}function R(O,S){const P=a[S];return typeof P=="object"&&P!==null?(0,zt._)`${p()}(${r}, ${O}[${S}])`:(0,zt._)`${r} === ${P}`}}};ln.default=tc;Object.defineProperty(Zr,"__esModule",{value:!0});const rc=xr,nc=en,ac=tn,sc=nn,oc=an,ic=sn,cc=on,uc=cn,lc=un,dc=ln,fc=[rc.default,nc.default,ac.default,sc.default,oc.default,ic.default,cc.default,uc.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},lc.default,dc.default];Zr.default=fc;var dn={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.validateAdditionalItems=void 0;const ot=H,Dr=k,hc={message:({params:{len:e}})=>(0,ot.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ot._)`{limit: ${e}}`},pc={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:hc,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,Dr.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ba(e,n)}};function Ba(e,t){const{gen:r,schema:n,data:a,keyword:o,it:c}=e;c.items=!0;const f=r.const("len",(0,ot._)`${a}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,ot._)`${f} <= ${t.length}`);else if(typeof n=="object"&&!(0,Dr.alwaysValidSchema)(c,n)){const p=r.var("valid",(0,ot._)`${f} <= ${t.length}`);r.if((0,ot.not)(p),()=>y(p)),e.ok(p)}function y(p){r.forRange("i",t.length,f,m=>{e.subschema({keyword:o,dataProp:m,dataPropType:Dr.Type.Num},p),c.allErrors||r.if((0,ot.not)(p),()=>r.break())})}}Ot.validateAdditionalItems=Ba;Ot.default=pc;var fn={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.validateTuple=void 0;const Zn=H,cr=k,mc=L,yc={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Wa(e,"additionalItems",t);r.items=!0,!(0,cr.alwaysValidSchema)(r,t)&&e.ok((0,mc.validateArray)(e))}};function Wa(e,t,r=e.schema){const{gen:n,parentSchema:a,data:o,keyword:c,it:f}=e;m(a),f.opts.unevaluated&&r.length&&f.items!==!0&&(f.items=cr.mergeEvaluated.items(n,r.length,f.items));const y=n.name("valid"),p=n.const("len",(0,Zn._)`${o}.length`);r.forEach(($,R)=>{(0,cr.alwaysValidSchema)(f,$)||(n.if((0,Zn._)`${p} > ${R}`,()=>e.subschema({keyword:c,schemaProp:R,dataProp:R},y)),e.ok(y))});function m($){const{opts:R,errSchemaPath:O}=f,S=r.length,P=S===$.minItems&&(S===$.maxItems||$[t]===!1);if(R.strictTuples&&!P){const _=`"${c}" is ${S}-tuple, but minItems or maxItems/${t} are not specified or different at path "${O}"`;(0,cr.checkStrictMode)(f,_,R.strictTuples)}}}Ct.validateTuple=Wa;Ct.default=yc;Object.defineProperty(fn,"__esModule",{value:!0});const vc=Ct,$c={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,vc.validateTuple)(e,"items")};fn.default=$c;var hn={};Object.defineProperty(hn,"__esModule",{value:!0});const xn=H,_c=k,gc=L,wc=Ot,Ec={message:({params:{len:e}})=>(0,xn.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,xn._)`{limit: ${e}}`},bc={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ec,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,!(0,_c.alwaysValidSchema)(n,t)&&(a?(0,wc.validateAdditionalItems)(e,a):e.ok((0,gc.validateArray)(e)))}};hn.default=bc;var pn={};Object.defineProperty(pn,"__esModule",{value:!0});const Ee=H,rr=k,Sc={message:({params:{min:e,max:t}})=>t===void 0?(0,Ee.str)`must contain at least ${e} valid item(s)`:(0,Ee.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ee._)`{minContains: ${e}}`:(0,Ee._)`{minContains: ${e}, maxContains: ${t}}`},Pc={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Sc,code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:o}=e;let c,f;const{minContains:y,maxContains:p}=n;o.opts.next?(c=y===void 0?1:y,f=p):c=1;const m=t.const("len",(0,Ee._)`${a}.length`);if(e.setParams({min:c,max:f}),f===void 0&&c===0){(0,rr.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,rr.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,rr.alwaysValidSchema)(o,r)){let P=(0,Ee._)`${m} >= ${c}`;f!==void 0&&(P=(0,Ee._)`${P} && ${m} <= ${f}`),e.pass(P);return}o.items=!0;const $=t.name("valid");f===void 0&&c===1?O($,()=>t.if($,()=>t.break())):c===0?(t.let($,!0),f!==void 0&&t.if((0,Ee._)`${a}.length > 0`,R)):(t.let($,!1),R()),e.result($,()=>e.reset());function R(){const P=t.name("_valid"),_=t.let("count",0);O(P,()=>t.if(P,()=>S(_)))}function O(P,_){t.forRange("i",0,m,h=>{e.subschema({keyword:"contains",dataProp:h,dataPropType:rr.Type.Num,compositeRule:!0},P),_()})}function S(P){t.code((0,Ee._)`${P}++`),f===void 0?t.if((0,Ee._)`${P} >= ${c}`,()=>t.assign($,!0).break()):(t.if((0,Ee._)`${P} > ${f}`,()=>t.assign($,!1).break()),c===1?t.assign($,!0):t.if((0,Ee._)`${P} >= ${c}`,()=>t.assign($,!0)))}}};pn.default=Pc;var Qa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=H,r=k,n=L;e.error={message:({params:{property:y,depsCount:p,deps:m}})=>{const $=p===1?"property":"properties";return(0,t.str)`must have ${$} ${m} when property ${y} is present`},params:({params:{property:y,depsCount:p,deps:m,missingProperty:$}})=>(0,t._)`{property: ${y},
    missingProperty: ${$},
    depsCount: ${p},
    deps: ${m}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(y){const[p,m]=o(y);c(y,p),f(y,m)}};function o({schema:y}){const p={},m={};for(const $ in y){if($==="__proto__")continue;const R=Array.isArray(y[$])?p:m;R[$]=y[$]}return[p,m]}function c(y,p=y.schema){const{gen:m,data:$,it:R}=y;if(Object.keys(p).length===0)return;const O=m.let("missing");for(const S in p){const P=p[S];if(P.length===0)continue;const _=(0,n.propertyInData)(m,$,S,R.opts.ownProperties);y.setParams({property:S,depsCount:P.length,deps:P.join(", ")}),R.allErrors?m.if(_,()=>{for(const h of P)(0,n.checkReportMissingProp)(y,h)}):(m.if((0,t._)`${_} && (${(0,n.checkMissingProp)(y,P,O)})`),(0,n.reportMissingProp)(y,O),m.else())}}e.validatePropertyDeps=c;function f(y,p=y.schema){const{gen:m,data:$,keyword:R,it:O}=y,S=m.name("valid");for(const P in p)(0,r.alwaysValidSchema)(O,p[P])||(m.if((0,n.propertyInData)(m,$,P,O.opts.ownProperties),()=>{const _=y.subschema({keyword:R,schemaProp:P},S);y.mergeValidEvaluated(_,S)},()=>m.var(S,!0)),y.ok(S))}e.validateSchemaDeps=f,e.default=a})(Qa);var mn={};Object.defineProperty(mn,"__esModule",{value:!0});const Xa=H,Nc=k,Oc={message:"property name must be valid",params:({params:e})=>(0,Xa._)`{propertyName: ${e.propertyName}}`},Cc={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Oc,code(e){const{gen:t,schema:r,data:n,it:a}=e;if((0,Nc.alwaysValidSchema)(a,r))return;const o=t.name("valid");t.forIn("key",n,c=>{e.setParams({propertyName:c}),e.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},o),t.if((0,Xa.not)(o),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(o)}};mn.default=Cc;var $r={};Object.defineProperty($r,"__esModule",{value:!0});const nr=L,Pe=H,Rc=Ue,ar=k,Tc={message:"must NOT have additional properties",params:({params:e})=>(0,Pe._)`{additionalProperty: ${e.additionalProperty}}`},jc={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Tc,code(e){const{gen:t,schema:r,parentSchema:n,data:a,errsCount:o,it:c}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:f,opts:y}=c;if(c.props=!0,y.removeAdditional!=="all"&&(0,ar.alwaysValidSchema)(c,r))return;const p=(0,nr.allSchemaProperties)(n.properties),m=(0,nr.allSchemaProperties)(n.patternProperties);$(),e.ok((0,Pe._)`${o} === ${Rc.default.errors}`);function $(){t.forIn("key",a,_=>{!p.length&&!m.length?S(_):t.if(R(_),()=>S(_))})}function R(_){let h;if(p.length>8){const b=(0,ar.schemaRefOrVal)(c,n.properties,"properties");h=(0,nr.isOwnProperty)(t,b,_)}else p.length?h=(0,Pe.or)(...p.map(b=>(0,Pe._)`${_} === ${b}`)):h=Pe.nil;return m.length&&(h=(0,Pe.or)(h,...m.map(b=>(0,Pe._)`${(0,nr.usePattern)(e,b)}.test(${_})`))),(0,Pe.not)(h)}function O(_){t.code((0,Pe._)`delete ${a}[${_}]`)}function S(_){if(y.removeAdditional==="all"||y.removeAdditional&&r===!1){O(_);return}if(r===!1){e.setParams({additionalProperty:_}),e.error(),f||t.break();return}if(typeof r=="object"&&!(0,ar.alwaysValidSchema)(c,r)){const h=t.name("valid");y.removeAdditional==="failing"?(P(_,h,!1),t.if((0,Pe.not)(h),()=>{e.reset(),O(_)})):(P(_,h),f||t.if((0,Pe.not)(h),()=>t.break()))}}function P(_,h,b){const T={keyword:"additionalProperties",dataProp:_,dataPropType:ar.Type.Str};b===!1&&Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(T,h)}}};$r.default=jc;var yn={};Object.defineProperty(yn,"__esModule",{value:!0});const Ic=Ce,ea=L,Nr=k,ta=$r,kc={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ta.default.code(new Ic.KeywordCxt(o,ta.default,"additionalProperties"));const c=(0,ea.allSchemaProperties)(r);for(const $ of c)o.definedProperties.add($);o.opts.unevaluated&&c.length&&o.props!==!0&&(o.props=Nr.mergeEvaluated.props(t,(0,Nr.toHash)(c),o.props));const f=c.filter($=>!(0,Nr.alwaysValidSchema)(o,r[$]));if(f.length===0)return;const y=t.name("valid");for(const $ of f)p($)?m($):(t.if((0,ea.propertyInData)(t,a,$,o.opts.ownProperties)),m($),o.allErrors||t.else().var(y,!0),t.endIf()),e.it.definedProperties.add($),e.ok(y);function p($){return o.opts.useDefaults&&!o.compositeRule&&r[$].default!==void 0}function m($){e.subschema({keyword:"properties",schemaProp:$,dataProp:$},y)}}};yn.default=kc;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});const ra=L,sr=H,na=k,aa=k,Dc={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:a,it:o}=e,{opts:c}=o,f=(0,ra.allSchemaProperties)(r),y=f.filter(P=>(0,na.alwaysValidSchema)(o,r[P]));if(f.length===0||y.length===f.length&&(!o.opts.unevaluated||o.props===!0))return;const p=c.strictSchema&&!c.allowMatchingProperties&&a.properties,m=t.name("valid");o.props!==!0&&!(o.props instanceof sr.Name)&&(o.props=(0,aa.evaluatedPropsToName)(t,o.props));const{props:$}=o;R();function R(){for(const P of f)p&&O(P),o.allErrors?S(P):(t.var(m,!0),S(P),t.if(m))}function O(P){for(const _ in p)new RegExp(P).test(_)&&(0,na.checkStrictMode)(o,`property ${_} matches pattern ${P} (use allowMatchingProperties)`)}function S(P){t.forIn("key",n,_=>{t.if((0,sr._)`${(0,ra.usePattern)(e,P)}.test(${_})`,()=>{const h=y.includes(P);h||e.subschema({keyword:"patternProperties",schemaProp:P,dataProp:_,dataPropType:aa.Type.Str},m),o.opts.unevaluated&&$!==!0?t.assign((0,sr._)`${$}[${_}]`,!0):!h&&!o.allErrors&&t.if((0,sr.not)(m),()=>t.break())})})}}};vn.default=Dc;var $n={};Object.defineProperty($n,"__esModule",{value:!0});const Ac=k,Mc={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,Ac.alwaysValidSchema)(n,r)){e.fail();return}const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};$n.default=Mc;var _n={};Object.defineProperty(_n,"__esModule",{value:!0});const Vc=L,Fc={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Vc.validateUnion,error:{message:"must match a schema in anyOf"}};_n.default=Fc;var gn={};Object.defineProperty(gn,"__esModule",{value:!0});const ur=H,Uc=k,qc={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ur._)`{passingSchemas: ${e.passing}}`},zc={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:qc,code(e){const{gen:t,schema:r,parentSchema:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&n.discriminator)return;const o=r,c=t.let("valid",!1),f=t.let("passing",null),y=t.name("_valid");e.setParams({passing:f}),t.block(p),e.result(c,()=>e.reset(),()=>e.error(!0));function p(){o.forEach((m,$)=>{let R;(0,Uc.alwaysValidSchema)(a,m)?t.var(y,!0):R=e.subschema({keyword:"oneOf",schemaProp:$,compositeRule:!0},y),$>0&&t.if((0,ur._)`${y} && ${c}`).assign(c,!1).assign(f,(0,ur._)`[${f}, ${$}]`).else(),t.if(y,()=>{t.assign(c,!0),t.assign(f,$),R&&e.mergeEvaluated(R,ur.Name)})})}}};gn.default=zc;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});const Kc=k,Lc={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=t.name("valid");r.forEach((o,c)=>{if((0,Kc.alwaysValidSchema)(n,o))return;const f=e.subschema({keyword:"allOf",schemaProp:c},a);e.ok(a),e.mergeEvaluated(f)})}};wn.default=Lc;var En={};Object.defineProperty(En,"__esModule",{value:!0});const pr=H,Ya=k,Hc={message:({params:e})=>(0,pr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,pr._)`{failingKeyword: ${e.ifClause}}`},Gc={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Hc,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,Ya.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const a=sa(n,"then"),o=sa(n,"else");if(!a&&!o)return;const c=t.let("valid",!0),f=t.name("_valid");if(y(),e.reset(),a&&o){const m=t.let("ifClause");e.setParams({ifClause:m}),t.if(f,p("then",m),p("else",m))}else a?t.if(f,p("then")):t.if((0,pr.not)(f),p("else"));e.pass(c,()=>e.error(!0));function y(){const m=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},f);e.mergeEvaluated(m)}function p(m,$){return()=>{const R=e.subschema({keyword:m},f);t.assign(c,f),e.mergeValidEvaluated(R,c),$?t.assign($,(0,pr._)`${m}`):e.setParams({ifClause:m})}}}};function sa(e,t){const r=e.schema[t];return r!==void 0&&!(0,Ya.alwaysValidSchema)(e,r)}En.default=Gc;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});const Jc=k,Bc={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Jc.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};bn.default=Bc;Object.defineProperty(dn,"__esModule",{value:!0});const Wc=Ot,Qc=fn,Xc=Ct,Yc=hn,Zc=pn,xc=Qa,eu=mn,tu=$r,ru=yn,nu=vn,au=$n,su=_n,ou=gn,iu=wn,cu=En,uu=bn;function lu(e=!1){const t=[au.default,su.default,ou.default,iu.default,cu.default,uu.default,eu.default,tu.default,xc.default,ru.default,nu.default];return e?t.push(Qc.default,Yc.default):t.push(Wc.default,Xc.default),t.push(Zc.default),t}dn.default=lu;var Sn={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});const oe=H,du={message:({schemaCode:e})=>(0,oe.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,oe._)`{format: ${e}}`},fu={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:du,code(e,t){const{gen:r,data:n,$data:a,schema:o,schemaCode:c,it:f}=e,{opts:y,errSchemaPath:p,schemaEnv:m,self:$}=f;if(!y.validateFormats)return;a?R():O();function R(){const S=r.scopeValue("formats",{ref:$.formats,code:y.code.formats}),P=r.const("fDef",(0,oe._)`${S}[${c}]`),_=r.let("fType"),h=r.let("format");r.if((0,oe._)`typeof ${P} == "object" && !(${P} instanceof RegExp)`,()=>r.assign(_,(0,oe._)`${P}.type || "string"`).assign(h,(0,oe._)`${P}.validate`),()=>r.assign(_,(0,oe._)`"string"`).assign(h,P)),e.fail$data((0,oe.or)(b(),T()));function b(){return y.strictSchema===!1?oe.nil:(0,oe._)`${c} && !${h}`}function T(){const A=m.$async?(0,oe._)`(${P}.async ? await ${h}(${n}) : ${h}(${n}))`:(0,oe._)`${h}(${n})`,M=(0,oe._)`(typeof ${h} == "function" ? ${A} : ${h}.test(${n}))`;return(0,oe._)`${h} && ${h} !== true && ${_} === ${t} && !${M}`}}function O(){const S=$.formats[o];if(!S){b();return}if(S===!0)return;const[P,_,h]=T(S);P===t&&e.pass(A());function b(){if(y.strictSchema===!1){$.logger.warn(M());return}throw new Error(M());function M(){return`unknown format "${o}" ignored in schema at path "${p}"`}}function T(M){const Q=M instanceof RegExp?(0,oe.regexpCode)(M):y.code.formats?(0,oe._)`${y.code.formats}${(0,oe.getProperty)(o)}`:void 0,ne=r.scopeValue("formats",{key:o,ref:M,code:Q});return typeof M=="object"&&!(M instanceof RegExp)?[M.type||"string",M.validate,(0,oe._)`${ne}.validate`]:["string",M,ne]}function A(){if(typeof S=="object"&&!(S instanceof RegExp)&&S.async){if(!m.$async)throw new Error("async format in sync schema");return(0,oe._)`await ${h}(${n})`}return typeof _=="function"?(0,oe._)`${h}(${n})`:(0,oe._)`${h}.test(${n})`}}}};Pn.default=fu;Object.defineProperty(Sn,"__esModule",{value:!0});const hu=Pn,pu=[hu.default];Sn.default=pu;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.contentVocabulary=Pt.metadataVocabulary=void 0;Pt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Pt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Qr,"__esModule",{value:!0});const mu=Xr,yu=Zr,vu=dn,$u=Sn,oa=Pt,_u=[mu.default,yu.default,(0,vu.default)(),$u.default,oa.metadataVocabulary,oa.contentVocabulary];Qr.default=_u;var Nn={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.DiscrError=void 0;var ia;(function(e){e.Tag="tag",e.Mapping="mapping"})(ia||(_r.DiscrError=ia={}));Object.defineProperty(Nn,"__esModule",{value:!0});const gt=H,Ar=_r,ca=$e,gu=Nt,wu=k,Eu={message:({params:{discrError:e,tagName:t}})=>e===Ar.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,gt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},bu={keyword:"discriminator",type:"object",schemaType:"object",error:Eu,code(e){const{gen:t,data:r,schema:n,parentSchema:a,it:o}=e,{oneOf:c}=a;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const f=n.propertyName;if(typeof f!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!c)throw new Error("discriminator: requires oneOf keyword");const y=t.let("valid",!1),p=t.const("tag",(0,gt._)`${r}${(0,gt.getProperty)(f)}`);t.if((0,gt._)`typeof ${p} == "string"`,()=>m(),()=>e.error(!1,{discrError:Ar.DiscrError.Tag,tag:p,tagName:f})),e.ok(y);function m(){const O=R();t.if(!1);for(const S in O)t.elseIf((0,gt._)`${p} === ${S}`),t.assign(y,$(O[S]));t.else(),e.error(!1,{discrError:Ar.DiscrError.Mapping,tag:p,tagName:f}),t.endIf()}function $(O){const S=t.name("valid"),P=e.subschema({keyword:"oneOf",schemaProp:O},S);return e.mergeEvaluated(P,gt.Name),S}function R(){var O;const S={},P=h(a);let _=!0;for(let A=0;A<c.length;A++){let M=c[A];if(M!=null&&M.$ref&&!(0,wu.schemaHasRulesButRef)(M,o.self.RULES)){const ne=M.$ref;if(M=ca.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,ne),M instanceof ca.SchemaEnv&&(M=M.schema),M===void 0)throw new gu.default(o.opts.uriResolver,o.baseId,ne)}const Q=(O=M==null?void 0:M.properties)===null||O===void 0?void 0:O[f];if(typeof Q!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${f}"`);_=_&&(P||h(M)),b(Q,A)}if(!_)throw new Error(`discriminator: "${f}" must be required`);return S;function h({required:A}){return Array.isArray(A)&&A.includes(f)}function b(A,M){if(A.const)T(A.const,M);else if(A.enum)for(const Q of A.enum)T(Q,M);else throw new Error(`discriminator: "properties/${f}" must have "const" or "enum"`)}function T(A,M){if(typeof A!="string"||A in S)throw new Error(`discriminator: "${f}" values must be unique strings`);S[A]=M}}}};Nn.default=bu;const Su="http://json-schema.org/draft-07/schema#",Pu="http://json-schema.org/draft-07/schema#",Nu="Core schema meta-schema",Ou={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Cu=["object","boolean"],Ru={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Tu={$schema:Su,$id:Pu,title:Nu,definitions:Ou,type:Cu,properties:Ru,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=la,n=Qr,a=Nn,o=Tu,c=["/properties"],f="http://json-schema.org/draft-07/schema";class y extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(S=>this.addVocabulary(S)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const S=this.opts.$data?this.$dataMetaSchema(o,c):o;this.addMetaSchema(S,f,!1),this.refs["http://json-schema.org/schema"]=f}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(f)?f:void 0)}}t.Ajv=y,e.exports=t=y,e.exports.Ajv=y,Object.defineProperty(t,"__esModule",{value:!0}),t.default=y;var p=Ce;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return p.KeywordCxt}});var m=H;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var $=Qt;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return $.default}});var R=Nt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return R.default}})})(Or,Or.exports);var ju=Or.exports;const Iu=ls(ju),ku={$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{uuid:{type:"string",nullable:!0},authors:{items:{type:"string"},type:"array",nullable:!0},displayName:{type:"string",nullable:!0},publishDate:{type:"number",nullable:!0},viewUrl:{type:"string",nullable:!0},downloadUrl:{type:"string",nullable:!0},md5:{type:"string",nullable:!0},phash:{type:"string",nullable:!0},resolution:{items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,type:"array",nullable:!0},fileSize:{type:"number",nullable:!0},languages:{items:{type:"string"},type:"array",nullable:!0},tags:{items:{type:"string"},type:"array",nullable:!0},abstract:{type:"string",nullable:!0},rights:{type:"string",nullable:!0},source:{type:"object",properties:{name:{type:"string"},url:{type:"string"},accessDate:{type:"string"}},required:["name","url","accessDate"],additionalProperties:!1,nullable:!0}},additionalProperties:!0},Du=new Iu({allowUnionTypes:!0}),Au=Du.compile(ku),Mu=e=>{let t=null,r=!1,n=!1;try{t=JSON.parse(e),r=!0,n=Au(t)}catch{}return{parsed:t,validJson:r,validVisualization:n}},On=ds("json",{state:()=>({text:""}),getters:{validationResult:e=>Mu(e.text),parsed(){return this.validationResult.parsed},validJson(){return this.validationResult.validJson},validVisualization(){return this.validationResult.validVisualization}},persist:!0}),Vu={"view-container":""},Fu=pe("div",{"view-header":""},[pe("div",{class:"i-fa6-solid:code my-auto"}),pe("div",{class:"font-bold"}," Data Entry Parsed ")],-1),Uu={class:"overflow-auto p-1 flex-1 flex"},qu={key:1,class:"text-red m-auto"},zu=Mr({__name:"TheViewDataEntryParsed",setup(e){const{parsed:t}=Vr(On());return(r,n)=>{const a=fs;return Qe(),bt("div",Vu,[Fu,pe("div",Uu,[Ne(t)!==null?(Qe(),ua(a,{key:0,datum:Ne(t)},null,8,["datum"])):(Qe(),bt("div",qu," Invalid Data Entry "))])])}}}),Ku={"view-container":""},Lu=pe("div",{"view-header":""},[pe("div",{class:"i-fa6-solid:code my-auto"}),pe("div",{class:"font-bold"}," JSON Parsed ")],-1),Hu={class:"overflow-auto p-1 flex-1 flex"},Gu={key:1,class:"text-red m-auto"},Ju=Mr({__name:"TheViewJsonParsed",setup(e){const{parsed:t,validJson:r}=Vr(On());return(n,a)=>(Qe(),bt("div",Ku,[Lu,pe("div",Hu,[Ne(r)?(Qe(),ua(Ne(ps),{key:0,data:Ne(t),"expand-level":5,"dark-theme":Ne(hs)},null,8,["data","dark-theme"])):(Qe(),bt("div",Gu," Invalid JSON "))])]))}}),Bu={"view-container":""},Wu={"view-header":""},Qu=pe("div",{class:"i-fa6-solid:code my-auto"},null,-1),Xu=pe("div",{class:"font-bold"}," JSON Input ",-1),Yu=["disabled"],Zu=["disabled"],xu=pe("a",{rel:"noreferrer",href:"https://github.com/oldvis/dataset/issues",target:"_blank"}," submit ",-1),el=[xu],tl=Mr({__name:"TheViewJsonInput",setup(e){const{text:t,validJson:r}=Vr(On()),n=()=>{r.value&&(t.value=JSON.stringify(JSON.parse(t.value),null,4))};return(a,o)=>(Qe(),bt("div",Bu,[pe("div",Wu,[Qu,Xu,pe("button",{btn:"",class:qn(["ml-auto py-0",{"pointer-events-none":!Ne(r)}]),title:"Format the JSON",disabled:!Ne(r),onClick:n}," format ",10,Yu),pe("button",{btn:"",class:qn(["py-0",{"pointer-events-none":!Ne(r)}]),title:"Submit to server",disabled:!Ne(r)},el,10,Zu)]),ms(pe("textarea",{"onUpdate:modelValue":o[0]||(o[0]=c=>vs(t)?t.value=c:null),"input-area":"",class:"flex-1 m-1 py-1 text-sm resize-none",placeholder:"Your JSON..."},null,512),[[ys,Ne(t)]])]))}}),rl={},nl={class:"flex grow gap-1 m-1 overflow-auto"},al={class:"flex-1 gap-1",flex:"~ col"};function sl(e,t){const r=tl,n=Ju,a=zu;return Qe(),bt("div",nl,[pe("div",al,[wr(r,{class:"flex-1"}),wr(n,{class:"flex-1"})]),wr(a,{class:"flex-1"})])}const il=$s(rl,[["render",sl]]);export{il as default};
